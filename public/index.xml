<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Stuart Lacy on Stuart Lacy</title>
    <link>/</link>
    <description>Recent content in Stuart Lacy on Stuart Lacy</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <copyright>&amp;copy; 2017 Stuart Lacy</copyright>
    <lastBuildDate>Wed, 20 Apr 2016 00:00:00 +0000</lastBuildDate>
    <atom:link href="/" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Implementing an Elo rating system for European football </title>
      <link>/2017/08/31/implementing-an-elo-rating-system-for-european-football/</link>
      <pubDate>Thu, 31 Aug 2017 00:00:00 +0100</pubDate>
      
      <guid>/2017/08/31/implementing-an-elo-rating-system-for-european-football/</guid>
      <description>

&lt;p&gt;My football prediction has &lt;a href=&#34;http://stuartlacy.co.uk/2017/06/27/predicting-football-results-in-2016-2017-with-machine-learning---bayesian-hierarchical-modelling/&#34; target=&#34;_blank&#34;&gt;previously
relied&lt;/a&gt; upon a
Bayesian approach to quantify a team&amp;rsquo;s skill level, by modelling it as a
random intercept in a hierarchical model of the outcome of a match.
While this model performed very well (&lt;a href=&#34;http://stuartlacy.co.uk/2017/06/27/predicting-football-results-in-2016-2017-with-machine-learning---bayesian-hierarchical-modelling/&#34; target=&#34;_blank&#34;&gt;62% accuracy last
season&lt;/a&gt;), I was never
fully satisfied since this measure of skill is an average across the
last ten seasons that I had data for, rather than being updated to
reflect the time-varying nature of form. This meant that a team which
had experienced a large skill change in recent years and was heading on
the same trajectory was poorly predicted by the model, such as was the
case with Red Bull Leipzig, who came second in the Bundesliga in their
first season after promotion.&lt;/p&gt;

&lt;p&gt;In an attempt to combat this I added extra predictors to each match that
measured the form of each team by counting the number of wins and losses
from their previous 5 games. However, this method doesn&amp;rsquo;t take into
account the oppponents of those games or whether they had home advantage
or not. Instead, what I really wanted was a longitudinal measure of
skill, such as the
&lt;a href=&#34;https://en.wikipedia.org/wiki/Elo_rating_system&#34; target=&#34;_blank&#34;&gt;Elo&lt;/a&gt; system. This post
provides a brief introduction to the Elo scoring system before going
into detail on my implementation for European club football.&lt;/p&gt;

&lt;h2 id=&#34;elo&#34;&gt;Elo&lt;/h2&gt;

&lt;p&gt;The Elo rating system is a method of quantifying the skill of
competitors in a head-to-head competition, which was initially designed
for chess. It starts off by determining what an average rating is, with
1500 typically being used. This is assigned to every newcomer and is
updated after each match to reflect the team&amp;rsquo;s performance. The amount
to update by takes into account the expected match outcome, i.e. if
Leeds beat Man Utd they would receive far more Elo points than if they
beat another team in the Championship, since beating Man Utd is far more
of an upset. Elo was designed for games where there are only two
outcomes: win/loss, but it can be applied to games with draws as well;
the team who were expected to win lose points while the underdog gains
them. It is a zero-sum system: the amount of Elo points won by the
winning side are equal to the amount of points lost by the losers.
Overall, the mean Elo score will be equal to the starting value.&lt;/p&gt;

&lt;p&gt;Mathematically, the system is characterised by 2 equations. The
&lt;strong&gt;expected&lt;/strong&gt; outcome $E$ is given by the following equation, where $dr = elo_{home}-elo_{away}$. A value of $E$ = 1 indicates a home win, 0.5 indicates a draw and 0 is
an away win.&lt;/p&gt;

&lt;p&gt;$$E = \frac{1}{1+10^\frac{-dr}{400}}$$&lt;/p&gt;

&lt;p&gt;The rating update is calculated as follows:&lt;/p&gt;

&lt;p&gt;$$elo_{home}^{′}=elo_{home}+KG(O − E)$$&lt;/p&gt;

&lt;p&gt;We&amp;rsquo;ve already seen $E$, and $O$ is the &lt;strong&gt;observed&lt;/strong&gt; outcome where
$O \in $ {0, 0.5, 1} for loss, draw, win respectively.&lt;/p&gt;

&lt;p&gt;This leaves 2 parameters $K$ and $G$ that govern the system stability
and incorporate margin of victory respectively. I&amp;rsquo;ll later discuss
how to select values for these. There are two other considerations of a
football prediction model: incorporating home advantage and how to
handling promotion and relegation.&lt;/p&gt;

&lt;p&gt;I&amp;rsquo;ve found several implementations of Elo to club sports and make
reference to these throughout the rest of the document. I&amp;rsquo;d highly
recommend reading them if you&amp;rsquo;re interested, the FiveThirtyEight
articles are particularly well written.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.eloratings.net/system.html&#34; target=&#34;_blank&#34;&gt;World Football Ratings&lt;/a&gt;
(Soccer national teams)&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://clubelo.com/System&#34; target=&#34;_blank&#34;&gt;Club Elo&lt;/a&gt; (Soccer club teams)&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://fivethirtyeight.com/features/how-we-calculate-nba-elo-ratings/&#34; target=&#34;_blank&#34;&gt;FiveThirtyEight&amp;rsquo;s
NBA&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://fivethirtyeight.com/datalab/introducing-nfl-elo-ratings/&#34; target=&#34;_blank&#34;&gt;FiveThirtyEight&amp;rsquo;s
NFL&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;considerations&#34;&gt;Considerations&lt;/h2&gt;

&lt;h3 id=&#34;k&#34;&gt;$K$&lt;/h3&gt;

&lt;p&gt;Let&amp;rsquo;s start with an easy one. $K$ is a scaling parameter that dictates
how much impact recent results should have on Elo. For sports with a
small number of games that correlate strongly with a team&amp;rsquo;s ability,
such as the football World Cup, use a large value. For assessing the
strength of a team over a long season, where each individual match has
less bearing on a team&amp;rsquo;s ability then a smaller value is more
appropriate. I&amp;rsquo;m going to use $K = 20$ as used by all the four
implementations referencd above.&lt;/p&gt;

&lt;h3 id=&#34;home-advantage&#34;&gt;Home advantage&lt;/h3&gt;

&lt;p&gt;Home advantage is typically incorporated into an Elo scoring method by
manually adding a constant value to the home team&amp;rsquo;s Elo, for example:
$$dr = elo_{home} − elo_{away} + HA$$
where $HA$ is a constant. This value can be determined by looking at
historical data to identify a value of $E$ assuming both teams are of
equal skill, and solving for $HA$.&lt;/p&gt;

&lt;p&gt;$$dr = -400log(\frac{1}{E} - 1) = HA$$
when $elo_{home} = elo_{away}$.&lt;/p&gt;

&lt;p&gt;Different rating systems use different values:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;World Football and NBA use 100&lt;/li&gt;
&lt;li&gt;FiveThirtyEight&amp;rsquo;s NFL uses 65&lt;/li&gt;
&lt;li&gt;Club Elo uses a dynamic system that is updated each week to account
for historical trends in home advantage. I don&amp;rsquo;t think it&amp;rsquo;s
necessary to update it this frequently, but it is definitely worth
recalculating it every season and keeping a separate value for
each league.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;I&amp;rsquo;m going to use the football results database I&amp;rsquo;ve built up to identify
appropriate values of HA, exploring whether there&amp;rsquo;s significant
inter-league variation and any temporal trends.&lt;/p&gt;

&lt;p&gt;The plot below displays home advantage calculated every 4 weeks across
the main 4 European leagues with an overlaid smooth. It highlights that
while the magnitude of home advantage does fluctuate over time, it does
not appear to change quickly enough to necessitate weekly updates as
Club Elo do. It&amp;rsquo;s also interesting to view how home advantage differs
across leagues. For example, from 2007 to 2013 the Bundesliga had
substantially lower home advantage than the other leagues, with all
leagues experiencing similar levels of home advantage from this point
onwards.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;/img/elo_31082017/unnamed-chunk-6-1.png&#34; alt=&#34;Home advantage over time per league&#34; /&gt;&lt;/p&gt;

&lt;p&gt;The plot highlights that there are definitely inter-league differences
in home advantage, but updating the home advantage constant more
frequently than season. &lt;a href=&#34;https://fivethirtyeight.com/features/how-we-calculate-nba-elo-ratings/&#34; target=&#34;_blank&#34;&gt;FiveThirtyEight investigated using dynamic home
advantage&lt;/a&gt;
but didn&amp;rsquo;t notice any significant improvement over a static constant. As
a result, I&amp;rsquo;ll stratify my home advantage by league and update it each
season.&lt;/p&gt;

&lt;h3 id=&#34;margin-of-victory&#34;&gt;Margin of victory&lt;/h3&gt;

&lt;p&gt;$G$ is a multiplier that accounts for the Margin of Victory (MOV), i.e.
assigning more Elo points for a 3-0 win than 1-0. Two considerations of
$G$ are that it doesn&amp;rsquo;t need to be linear, as the difference between a
5-0 win and a 6-0 win is not the same as the difference between a 1-0
and 2-0. Also note that while the MOV in a football (soccer) game is a
continuous variable, in practice it can be considered discrete taking on
values $[0, X]$, where $X$ is a large number that will almost never be met in normal circumstances, say, 15.&lt;/p&gt;

&lt;p&gt;The World Football Elo system uses the following formula:&lt;/p&gt;

&lt;p&gt;$G = 1 \ if \ MOV \in {0, 1}$&lt;/p&gt;

&lt;p&gt;$G = 1.5 \ if \ MOV = 2$&lt;/p&gt;

&lt;p&gt;$G = \frac{11 + MOV}{8} \ \ otherwise$&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;/img/elo_31082017/unnamed-chunk-8-1.png&#34; alt=&#34;World football&#39;s G function&#34; /&gt;&lt;/p&gt;

&lt;p&gt;This allows for MOV to play a bigger role in small victories, such as by
1 or 2 goal leads, with the effect decreasing at larger MOVs. I may even
be tempted to use a more rapid tailing off for higher victories, with no
additional benefit gained from beyond say 7 goals, since in my opinion
it is not the skill difference between two teams that determines whether
the MOV is 5 or 7, but other factors, such as red cards.&lt;/p&gt;

&lt;p&gt;However, FiveThirtyEight identified the problem of auto-correlation,
i.e. that strong teams are more likely to win by a large margin and so
inflate their rating. To combat this, a penalty term is added to $G$
that is a function of the Elo difference between the two teams. They use
two different functional forms for $G$ for NBA and NFL respectively:&lt;/p&gt;

&lt;p&gt;$G_{nba} = \frac{(MOV + 3)^{0.8}}{7.5 + 0.006dr}$&lt;/p&gt;

&lt;p&gt;$G_{nfl} = ln(abs(MOV)+1) \frac{2.2}{2.2 + 0.001dr}$&lt;/p&gt;

&lt;p&gt;I&amp;rsquo;ll firstly plot $G_{nba}$ for a range of $dr$.
I&amp;rsquo;m not familiar with basketball at all, but according to &lt;a href=&#34;http://www.landofbasketball.com/statistics/largest_margins.htm&#34; target=&#34;_blank&#34;&gt;this handy
website&lt;/a&gt;,
a MOV of 68 is the highest recorded. The plot shows a far more linear
curve than I expected, indeed it is more linear than World Football&amp;rsquo;s
formulation for G which applies the same multiplier for a 2-0 win as a
1-0. The effect of including $dr$ to counteract autocorrelation is
also highlighted, so that highly skilled teams receive fewer Elo points
for winning by a high margin than evenly matched teams.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;/img/elo_31082017/unnamed-chunk-10-1.png&#34; alt=&#34;G nba&#34; /&gt;&lt;/p&gt;

&lt;p&gt;The highest MOV in an NFL game is 58 (&lt;a href=&#34;http://mcubed.net/nfl/ptmarhgm.shtml&#34; target=&#34;_blank&#34;&gt;from
here&lt;/a&gt;). $G_{nfl}$
has a far steeper shape than the NBA owing to its use of the log,
perhaps reflecting that like soccer, MOV is less uniformly distributed.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;/img/elo_31082017/unnamed-chunk-12-1.png&#34; alt=&#34;G nfl &#34; /&gt;&lt;/p&gt;

&lt;p&gt;I&amp;rsquo;m going to take inspiration from these approaches to develop my own
formula for $G$. My main requirement is to have a similar log shape to
$G_{nfl}$, to better reward a win at small MOVs, while not
over-rewarding blowouts, since I don&amp;rsquo;t believe a MOV of 7 goals means
the winner is that much better than if they had won by 5. I also
definitely want to reward a 2-0 win more than a 1-0 win, unlike the
World Football implementation.&lt;/p&gt;

&lt;p&gt;I will tune it so that as with the NBA and NFL, the value for $G$ at the
highest recorded MOV is ~4 for two teams of equal skill. It&amp;rsquo;s hard to
find a reliable historic record MOV for competitive club football that
still has relevance for today&amp;rsquo;s game. I&amp;rsquo;ve found the maximum Premiership
MOV to be 9-0 (Man Utd vs Ipswich), in La Liga it&amp;rsquo;s a MOV of 11 from a
12-1 win for Bilbao over Barcelona. However, there are from the 1930s
when the game was played far differently. In my 11 season data set the
highest MOV is 8-0 from Chelsea vs Aston Villa so I&amp;rsquo;ll aim to fix $G = 4$ at this point. I&amp;rsquo;ll also add in a penalty term similar to
FiveThirtyEight to handle autocorrelation.&lt;/p&gt;

&lt;p&gt;Also note that unlike American sports where there are no ties and thus
$MOV \neq 0$, in football this is possible. This is why the World
Football method specifies two functional forms of $G$, one for
$MOV \leq 1$ and one for $MOV \gt 1$. I&amp;rsquo;ll take the same approach
of splitting the function up to ensure $G = 1$ at $MOV \leq 1$ and then
adding on a curve rather than the linear relationship in the original
implementation.&lt;/p&gt;

&lt;p&gt;After trial and error I was satisfied with the following expression.&lt;/p&gt;

&lt;p&gt;$$log(1.7MOV) \frac{2}{2 + 0.001dr}$$&lt;/p&gt;

&lt;p&gt;The plot below highlights my method, which meets its requirements of
having a log shape, better rewarding a MOV of 2 than 1, and having a
value of $G \approx 4$ at the highest recorded MOV value ($G = 3.77$ for
$MOV = 8$, which is close enough). I&amp;rsquo;ve used the same penalty as
$G_{nfl}$ since I have a similar logarithmic curve.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;/img/elo_31082017/unnamed-chunk-16-1.png&#34; alt=&#34;My final Elo function&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;handling-promotion-and-relegation&#34;&gt;Handling promotion and relegation&lt;/h3&gt;

&lt;p&gt;The idea of promotion and relegation is one that isn&amp;rsquo;t typically present
in American sports, where there are a set number of &lt;em&gt;franchises&lt;/em&gt; in the
league. The league gets expanded every now and then with new ones, but
as far as I&amp;rsquo;m aware franchises never leave the league without a
replacement. This constant expansion is different to football, where a
league will have the same number of teams across seasons (with minor
exceptions now and then) with the teams themselves changing in each off
season. A model will need to be able to handle promotion and relegation,
particularly since I won&amp;rsquo;t initially be tracking Elo for lower
divisions. In this situation, the system needs to adapt to ensure that
the average Elo of the Premiership is 1500, this can be achieved by
assigning the Elo of the promoted teams to the average rating of the
relegated teams. If I were to track ratings across the entire football
league then 1500 would refer to the global average and so promoted and
relegated teams would simply keep their current rating.&lt;/p&gt;

&lt;p&gt;I&amp;rsquo;ll also employ the decay method of FiveThirtyEight, whereby at the end
of a season each team&amp;rsquo;s rating is brought back towards the mean,
although I&amp;rsquo;ll slightly reduce this effect (0.80 Elo retained vs 0.75)
since I&amp;rsquo;d imagine teams in American sports are more likely to be pulled
to the average thanks to the draft system and the salary cap:&lt;/p&gt;

&lt;p&gt;$elo^{′} = 0.8elo + 0.2 \times 1500$&lt;/p&gt;

&lt;h2 id=&#34;final-system&#34;&gt;Final system&lt;/h2&gt;

&lt;p&gt;The final system then uses $K = 20$, the formulation of $G$ above, and
will track each top-tier European league independently, so that
relegated teams stop being monitored and promoted teams are assumed to
not have a known rating. Once I&amp;rsquo;ve got everything running smoothly I&amp;rsquo;ll
look into tracking as many complete league structures as possible, so
that an Elo of 1500 refers to an average team across Europe, rather than
just an average Serie A team for example. This will also facilitate easy
predictions for the Champions League.&lt;/p&gt;

&lt;p&gt;The plot below shows the change in rating of 4 Premiership teams over
the last 2 seasons using both my Elo system and the one employed by
World Football. The log shape of $G$ chosen for Predictaball results as
expected results in an amplified signal, with losses and wins of more
than 1 goal having a greater impact on the rating change. However, they
otherwise are well correlated. The inter-season decay is also visible in
the middle of the x-axis and appears to be well justified. For example,
Leceister finished the 2015-2016 season at a peak rating (owing to
having won the Premiership), but then immediately start off on a
downwards trend the next season, continuing the regression to the mean
that the inter-season decay forms. Liverpool seemed to have started off
the 2016-2017 season at the same skill that they ended the previous
season and so the weight decay is not strictly accurate here. However,
in the absence of information suggesting whether the team will start the
next season where they left off or not, the regression to the mean is
appropriate.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;/img/elo_31082017/unnamed-chunk-21-1.png&#34; alt=&#34;Elo of 4 Premier League teams&#34; /&gt;&lt;/p&gt;

&lt;h1 id=&#34;implementation-in-predictaball&#34;&gt;Implementation in Predictaball&lt;/h1&gt;

&lt;p&gt;Now that I have a longitudinal rating system, rather than the previous
static one, it can be incorporated into the overall predictive modelling
system that I&amp;rsquo;ve described variously elsewhere. The idea is that the
predictive model itself can be rather simple, since factors such as home
advantage, margin of victory, and of course skill, are included in the
Elo rating. I may still want to include other details, such as: an
indication of recent form measured by the overall rating change over the
last 5 games, if the &lt;a href=&#34;https://youngsportswriters.wordpress.com/2011/03/16/new-manager-syndrome-does-it-really-exist/&#34; target=&#34;_blank&#34;&gt;manager has changed
recently&lt;/a&gt;,
or the availability of key players. However, for now I&amp;rsquo;ll just make a
simple ordinal regression.&lt;/p&gt;

&lt;p&gt;The second aspect of Predictaball is identifying value bets offered by
the bookies. The &lt;a href=&#34;http://stuartlacy.co.uk/2017/06/28/predicting-football-results-in-2016-2017-with-machine-learning---automated-betting-system/&#34; target=&#34;_blank&#34;&gt;previous
method&lt;/a&gt; was profitable on the Premiership, but not on the other major European
leagues. This season I&amp;rsquo;m going to improve on the betting system in 2
ways: firstly so that it outputs a fraction of the bankroll to predict
rather than an absolute value, and secondly I&amp;rsquo;ll stratify it by league
as there seems to be variation in how the odds are calculated.&lt;/p&gt;

&lt;p&gt;Once I&amp;rsquo;ve finalised my match prediction and betting models I&amp;rsquo;ll write
about them, and will also try to provide more progress updates
throughout the season. My aim for this season is to make the system
robust and reliable, so that I can expand to other leagues and sports
with confidence.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Predicting football results in 2016-2017 with machine learning - Automated betting system</title>
      <link>/2017/06/28/predicting-football-results-in-2016-2017-with-machine-learning---automated-betting-system/</link>
      <pubDate>Wed, 28 Jun 2017 00:00:00 +0100</pubDate>
      
      <guid>/2017/06/28/predicting-football-results-in-2016-2017-with-machine-learning---automated-betting-system/</guid>
      <description>

&lt;p&gt;The &lt;a href=&#34;stuartlacy.co.uk/2017/06/27/predicting-football-results-in-2016-2017-with-machine-learning---bayesian-hierarchical-modelling/&#34; target=&#34;_blank&#34;&gt;last post&lt;/a&gt; showed that using a fully Bayesian multi-level model of the match outcomes helped Predictaball achieve a 58% overall prediction accuracy on the four European leagues, up 8% from last season. This post will describe the betting system I used to try and profit by identifying value bets in the offered odds.&lt;/p&gt;

&lt;h2 id=&#34;betting-system&#34;&gt;Betting system&lt;/h2&gt;

&lt;p&gt;Before delving into the profit analysis I&amp;rsquo;ll firstly quickly summarise
the staking model I used since I haven&amp;rsquo;t mentioned it anywhere before.&lt;/p&gt;

&lt;p&gt;I haven&amp;rsquo;t any experience with this and so at first I tried a few naive
schemes that bet unit stakes:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Always betting on the outcome with the highest probability&lt;/li&gt;
&lt;li&gt;Betting on the outcome with the highest probability when this
probability is greater than the bookies&amp;rsquo; implied probability&lt;/li&gt;
&lt;li&gt;Betting on any outcome when the probability is greater than the
bookies&amp;rsquo; implied probability&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Perhaps unsurprisingly, none of these made any profit on my test set of
the 2015-2016 season. I then research ways of modifying the stake value
itself and came across the well-known Kelly Criterion&lt;/p&gt;

&lt;p&gt;$f^{*} = \frac{p(b+1)-1}{b}$&lt;/p&gt;

&lt;p&gt;where $f^{*}$ is the fraction of bankroll to bet, $p$ is the
estimated probability of the event and $b$ is the profit received from a
unit bet if it paid out.&lt;/p&gt;

&lt;p&gt;However, I found that this scheme resulted in me losing money and so I
decided to get back into my comfort zone and implement a custom system.
I formulated a model of the absolute stake to place $s$ as a function of
the ratio between the predicted and implied probabilities of the
outcome:&lt;/p&gt;

&lt;p&gt;$$s = \beta&lt;em&gt;{1} x&lt;/em&gt;{1} + \beta&lt;em&gt;{2} x&lt;/em&gt;{2}$$&lt;/p&gt;

&lt;p&gt;Where $x_{1}$ is the predicted probability and $x_{2}$
is the bookies&amp;rsquo; implied probabilty. Fitting the coefficients with a
standard Nelder-Mead optimisation resulted in a ratio of
$\frac{\beta_{1}}{\beta_{2}} = -0.8$, i.e. if
$x_{1} &amp;gt; 1.2x_{2}$ then a positive stake is given,
with the value of the stake chosen by selecting an appropriate value for
either $\beta_{1}$ or $\beta_{2}$. I chose a value that resulted
in the maximum stake being £5, since I&amp;rsquo;m a cheapskate.&lt;/p&gt;

&lt;p&gt;However, in hindsight I should have instead modelled bankroll ratio like
the Kelly Criterion. Two main advantages of modelling stakes as a
fraction of bank are that it allows for bigger profit when on a winning
streak and it is impossible to go into the red provided appropriate
limits are enforced when placing multiple bets simultaneously.&lt;/p&gt;

&lt;p&gt;Note that the staking model doesn&amp;rsquo;t vary between leagues. This is an
important point since the predicted probabilities are generated in the
same way for each league, but the odds themselves may be determined
differently for each league. I.e. the British-based bookies may have
more knowledge of the Premier League and so can offer more accurate
odds, or they may adjust odds to the bets being placed on them, so there
may be more variance in popular markets.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;I should also clarify that I didn&amp;rsquo;t actually place these bets as I
considered this season a beta run of the betting system, but instead
stored the odds and stakes each week so I can view what would have
happened if I had placed them.&lt;/strong&gt;&lt;/p&gt;

&lt;h2 id=&#34;betting-profit&#34;&gt;Betting profit&lt;/h2&gt;

&lt;h3 id=&#34;overall&#34;&gt;Overall&lt;/h3&gt;

&lt;p&gt;All that theoretical talk is all very well and good, but how much money
would I have made if I had followed my automated tipping system? In
short, blindly following the tips would have lost me money, but as we&amp;rsquo;ll
see in a bit, a small amount of judgement and monitoring would have
produced a nice steady profit.&lt;/p&gt;

&lt;p&gt;Across the entire season, the net profit was £-74.87 from 512 bets, with
81 (16%) having paid off. Obviously, this is poor, although we&amp;rsquo;ll
identify why this is the case shortly and identify how to turn this
around.&lt;/p&gt;

&lt;p&gt;The plot below shows my cumulative profit over the season, showing a
rather linear downwards trend.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;/img/endofseason_2017/unnamed-chunk-6-1.png&#34; alt=&#34;Profit over time&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;profit-separated-by-league&#34;&gt;Profit separated by league&lt;/h3&gt;

&lt;p&gt;To try and identify any small positives out of this we&amp;rsquo;ll try to
diagnose what went wrong, starting with looking at profit broken down by
league. Immediately from the table below, we can see that there is a
large amount of inter-league variance, since the Premier League is in
profit and the Bundesliga essentially breaks even. The Spanish and
Italian leagues on the other hand don&amp;rsquo;t fare so well at all and are
responsible for the majority of the loss.&lt;/p&gt;

&lt;p&gt;What reason could there be for this large discrepancy? My pure
speculation is that bookies adjust odds according to the number of bets
being placed, and so in markets with a large number of bets being placed
you&amp;rsquo;ll see more adjusted odds. I imagine that far more bets are being
placed on the Premiership, but why would this result in profit for me?
Again, I&amp;rsquo;d have to speculate that people here tend to vote for the
favourite and so lengthen the odds on the underdog, thereby undervaluing
them. This phenomena tends to happen whenever the England national team
play, as they get massively overvalued, helping people like me make tidy
profit when they lose to teams like Iceland. However, in markets such as
Italy and Spain, I&amp;rsquo;d imagine the majority of people betting from the UK
(where the bookies that I&amp;rsquo;ve used are based) on these markets are more
informed and so don&amp;rsquo;t tend to upset the raw odds too much. I have no
idea how to explain the Bundesliga however.&lt;/p&gt;

&lt;p&gt;Interestingly, there seems to be an inverse relationship between the
number of bets placed and the profit. This suggests that the optimal
staking model (i.e. the premiership) has a high specificity since it
identifies fewer poor value bets (false positives in this context).&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr class=&#34;header&#34;&gt;
&lt;th align=&#34;left&#34;&gt;League&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;# bets&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;# won&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;Average stake&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;Profit&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;premiership&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;115&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;26&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;£0.88&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;£24.44&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;bundesliga1&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;126&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;27&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;£1.04&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;£-0.62&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;seriea&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;136&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;18&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;£1.22&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;£-36.43&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;laliga&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;135&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;10&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;£0.92&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;£-62.26&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;The plot below displays the profitability over the course of the season,
separated by league. It shows that the overall profit of the Premiership
is no fluke caused by a big winner on the last matchday, but a result of
steady consistent wins throughout the season. Likewise profit on the
Italian and Spanish leagues have been on a steady downwards trend all
season long. The Bundesliga is a bit different in that for the first
half of the season the net profit hovers around 0, before heading into
the black as a result of 3 big wins, peaking at £20 profit, before
dipping back to 0 by the end of the season. This is a point at which
human intervention would pay off, as those 3 big wins could have been
identified as anomalies and therefore deciding to stop placing bets on
the Bundesliga before the winnings regressed to the mean.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;/img/endofseason_2017/unnamed-chunk-9-1.png&#34; alt=&#34;Profit over time split by league&#34; /&gt;&lt;/p&gt;

&lt;p&gt;The main take home message from this section is that there is a large
variation in profitability across the leagues, and any automated tipping
system should be used with a grain of salt. Over this summer I&amp;rsquo;ll refine
the model by taking the league into account, as well as incorporating
human input to a greater degree. For example, by analysing historical
data it may be evident that some leagues are more profitable than
others, and so it would be easier to notice anomalies, such as when the
Bundesliga was in profit in March, and stop betting at this point.&lt;/p&gt;

&lt;h2 id=&#34;relationship-between-predictability-and-profitability&#34;&gt;Relationship between predictability and profitability&lt;/h2&gt;

&lt;p&gt;Something that struck me during the above analysis was that there didn&amp;rsquo;t
seem to be any relationship between the predictability and profitability
of a league. While it is true that the Premiership achieved both the
highest accuracy and largest profit, La Liga and Serie A had very high
match prediction accuracy of 58% but both lost large amounts of money.
The Bundesliga on the other hand only had 51% of outcomes correctly
guessed, but broke even overall. Likewise, there doesn&amp;rsquo;t appear to be
any patterns between the plots of accuracy and profitability broken down
by league.&lt;/p&gt;

&lt;p&gt;To me, this suggests that just because it may be hard to predict a
sport, then it doesn&amp;rsquo;t mean you can&amp;rsquo;t make money on it. The converse is
also true, while it is impressive being able to predict 58% of La Liga
outcomes, it doesn&amp;rsquo;t count for a lot if the bookies can do it better.&lt;/p&gt;

&lt;h2 id=&#34;conclusions&#34;&gt;Conclusions&lt;/h2&gt;

&lt;p&gt;From this analysis I&amp;rsquo;ve identified 3 main areas to work on over the
summer to improve the model for next season.&lt;/p&gt;

&lt;p&gt;I&amp;rsquo;ll firstly address the lack of accuracy at the start of the season,
since it takes until December for the model to reach a steady state.
Obviously part of this is due to the nature of an off-season where each
team changes their squad and comes back at a different level to how they
left off. The promotion of new teams adds an additional element of the
unknown, since there is less historical data to estimate how they will
fare in the new league. However, if I can capture these uncertainties in
the data I feed my model, such as by using more team level attributes
such as manager and squad changes, then hopefully my model can adapt
more quickly.&lt;/p&gt;

&lt;p&gt;Somewhat related to this, I&amp;rsquo;d like my model to adapt more quickly to
teams that play well, such as the example with Leipzig. Currently the
measure of a team&amp;rsquo;s strength is only calculated at the start of the
season based on all available training data. If a team hasn&amp;rsquo;t been seen
before then it is randomly assigned a strength. Instead, it would be
useful to continuously update this, so for example Leipzig could enter
the season with a randomly drawn strength value but this is updated to
reflect their considerable abilit as they keep winning games. One
standard way to do this is to use Elo scores. Elo scores could also help
alleviate the uncertainty at the start of the season, by allowing the
first $x$ games to count as &amp;ldquo;placement games&amp;rdquo; that update the Elo more
strongly.&lt;/p&gt;

&lt;p&gt;I&amp;rsquo;d going to spend more time on my admittedly rushed and naive betting
modelling. Armed with the knowledge from this work, I&amp;rsquo;m going to look
into stratifying my model by leagues, or other factors that could affect
betting technique, thereby helping me to identify high value bets. Also,
rather than outputting an absolute value to stake, the model should
provide a ratio of my current bank, thereby allowing for exponential
growth in the case as I had with the Premiership this season where I had
consistent linear profit.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Predicting football results in 2016-2017 with machine learning - Bayesian hierarchical modelling</title>
      <link>/2017/06/27/predicting-football-results-in-2016-2017-with-machine-learning---bayesian-hierarchical-modelling/</link>
      <pubDate>Tue, 27 Jun 2017 00:00:00 +0100</pubDate>
      
      <guid>/2017/06/27/predicting-football-results-in-2016-2017-with-machine-learning---bayesian-hierarchical-modelling/</guid>
      <description>

&lt;p&gt;And so we come to the end of another season of football, and more
importantly, Predictaball! This season has seen several large updates
that I was meaning to detail these at the start of the season but life
got in the way.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;The predictive model is now fully Bayesian&lt;/li&gt;
&lt;li&gt;I&amp;rsquo;ve added a betting system that identifies value bets&lt;/li&gt;
&lt;li&gt;I&amp;rsquo;ve expanded it to include the 3 other main European leagues:

&lt;ul&gt;
&lt;li&gt;La liga&lt;/li&gt;
&lt;li&gt;Serie A&lt;/li&gt;
&lt;li&gt;Bundesliga&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Rather than detailing these new aspects as well as summarising the season&amp;rsquo;s performance in one massive blog, I&amp;rsquo;ll split this into two parts. The first (this one) will summarise the Bayesian hierarchical model that I use for predicting match outcomes and its accuracy over the course of the season. The second part will discuss the betting scheme I implemented and how rich that made me (spoilers, not very much).&lt;/p&gt;

&lt;h2 id=&#34;bayesian-hierarchical-model&#34;&gt;Bayesian hierarchical model&lt;/h2&gt;

&lt;p&gt;Over last summer I upgraded the Naive Bayes classifier to a fully
Bayesian hierarchical model, using the fantastic &lt;code&gt;rjags&lt;/code&gt; R package to
interface with JAGS. It assumes the match outcome $O$ is distributed as
a multinomial (JAGS prefers the term &lt;em&gt;categorical distribution&lt;/em&gt; as the
multi-variate generalisation of the Bernouilli trial, i.e. the
Multinomial where $n = 1$).&lt;/p&gt;

&lt;p&gt;$$O_{i} \sim Multinomial(1, \phi_{i})$$
$$log(\phi_{ik}) = \alpha_{league_{i}k} + \gamma_{1k}\eta_{home_{i}} + \gamma_{2k}\eta_{away_{i}} +  \sum_{j}^{4}{\beta_{j} X_{ij}}$$&lt;/p&gt;

&lt;p&gt;For $k \in {1, 2, 3}$ representing the W/D/L outcomes of a match.&lt;/p&gt;

&lt;p&gt;Where:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;$\alpha$ is the league and outcome dependent intercept&lt;/li&gt;
&lt;li&gt;$\eta$ is a team-level intercept that provides a measure of team
&lt;strong&gt;strength&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;$X$ are 4 match-level predictors that measure the current form each
team is in, using metrics collected over the last 5 matches:

&lt;ul&gt;
&lt;li&gt;# of wins for the home team&lt;/li&gt;
&lt;li&gt;# of losses for the home team&lt;/li&gt;
&lt;li&gt;# of wins for the away team&lt;/li&gt;
&lt;li&gt;# of losses for the away team&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;There are three levels in this model: league, team, and match. It is a
random intercepts model, since there are league and team dependent
intercepts, with the slopes on a match level. I&amp;rsquo;m not going to provide
exact implementation details (although can provide them on request), but
I used vague priors and the last 11 seasons worth of data to fit the
model. Convergence took around 10 hours on my rather basic home server.&lt;/p&gt;

&lt;h2 id=&#34;match-prediction-accuracy&#34;&gt;Match Prediction Accuracy&lt;/h2&gt;

&lt;h3 id=&#34;overall&#34;&gt;Overall&lt;/h3&gt;

&lt;p&gt;There have been 1176 matches this season across all 4 leagues with 678
(58%) of these outcomes being correctly predicted. This is a better
accuracy than expected, since this classifier only got 50% on the
2015-2016 season that I was using as my test set.&lt;/p&gt;

&lt;p&gt;The figure below plots the overall accuracy across the season,
highlighting that there is a period of uncertainty at the start of the
season where teams adapt to their new squads, managers, and competition,
before settling down into a steady state around Christmas. It&amp;rsquo;s
important to note that I didn&amp;rsquo;t start Predictaball running until October
this year. This is mostly due to needing to wait until 5 games have been
completed to obtain form data.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;/img/endofseason_2017/unnamed-chunk-2-1.png&#34; alt=&#34;Accuracy over time&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;stratified-by-league&#34;&gt;Stratified by league&lt;/h3&gt;

&lt;p&gt;On its own, an accuracy of 58% is rather promising, but more information
about the model performance can be gained from looking at each league in
isolation.&lt;/p&gt;

&lt;p&gt;The table below shows the match accuracy split by league, and suggests
that there is a significant difference in each league&amp;rsquo;s predictability,
since the English, Spanish, and Italian leagues all have accuracies
around 58-60%, but the Bundesliga trails far behind on 51%. This is
unexpected, particularly since the prediction model accounts for
inter-league variance by having league-dependent intercepts.&lt;/p&gt;

&lt;p&gt;One factor that could go some way to explaining this behaviour is &lt;em&gt;RB
Leipzig&lt;/em&gt;, who were newly promoted to the Bundesliga this season but
played very well (not too unexpectedly given their recent takeover) and
came second. Because they hadn&amp;rsquo;t played in the Bundesliga before they
were not included in the training data and therefore were not provided
with a strength distribution. Instead, for each match prediction they
were assigned a random sample from the mean team strength posterior for
the German teams. However, as was quickly apparent, they were far
stronger than an average team and so Predictaball continuously
underestimated their chances.&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr class=&#34;header&#34;&gt;
&lt;th align=&#34;left&#34;&gt;League&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;Accuracy&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;premiership&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;62&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;laliga&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;58&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;seriea&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;58&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;bundesliga1&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;51&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;The high accuracy on the Premier League (62%) looks very promising for
the fully Bayesian approach. This is a massive improvement on the
previous two seasons of &lt;a href=&#34;http://stuartlacy.co.uk/2016/05/29/endseason&#34; target=&#34;_blank&#34;&gt;43% (Naive
Bayes)&lt;/a&gt; and &lt;a href=&#34;http://stuartlacy.co.uk/2015/10/27/predictaballendseason&#34; target=&#34;_blank&#34;&gt;48%
(Evolutionary Algorithm
classifier)&lt;/a&gt;,
indicating that either the league was more considerably more predictable
this season or that the Bayesian framework is more adapt at identifying
trends in the data. I imagine it&amp;rsquo;s a combination of both factors. The
particularly poor performance last season can be explained by the rather
chaotic season with Leiester winning and the reigning champions Chelsea
havng a nightmare start, however, this doesn&amp;rsquo;t explain the 14%
difference between the current season and 2014-2015, and so the Bayesian
model deserves some of the credit.&lt;/p&gt;

&lt;p&gt;The plot below displays accuracy as a function of time, split by league.
As shown before, it takes until around Christmas for the accuracy to
steady. I believe this behaviour is simply due to there being more
upsets at the start of the season as teams are adjusting to their new
squad and management, before settling into a rhythm around Christmas. I
can&amp;rsquo;t imagine it&amp;rsquo;s due to the model structure since the only
time-varying part of the model are the form factors for W/D/L in the
last 5 games, It would be useful if I could model this initial behaviour
better however&amp;hellip;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;/img/endofseason_2017/unnamed-chunk-4-1.png&#34; alt=&#34;Accuracy over time per league&#34; /&gt;&lt;/p&gt;

&lt;p&gt;Next time I&amp;rsquo;ll discuss the betting scheme as well as planning future improvements to Predictaball.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Simulating win probabilities of the CamelUp boardgame</title>
      <link>/2017/05/20/simulating-win-probabilities-of-the-camelup-boardgame/</link>
      <pubDate>Sat, 20 May 2017 00:00:00 +0100</pubDate>
      
      <guid>/2017/05/20/simulating-win-probabilities-of-the-camelup-boardgame/</guid>
      <description>

&lt;p&gt;&lt;a href=&#34;https://boardgamegeek.com/boardgame/153938/camel&#34; target=&#34;_blank&#34;&gt;Camel Up&lt;/a&gt; is a
deceptively simple board game in which the aim is to predict the outcome
of a camel race. I&amp;rsquo;ll quickly try to explain the game now, although it&amp;rsquo;s
always hard to explain a boardgame without an actual demonstration.&lt;/p&gt;

&lt;p&gt;The camel movement is randomly generated from dice rolls as follows.
Five dice coloured for each of the five camels, each labelled with the
numbers 1-3 twice, are placed into a container (decorated as a pyramid,
since the game is set in Egypt), which is then shaken. A dice is drawn
from the pyramid with the corresponding camel advancing the number of
squares denoted by the face-up dice value.&lt;/p&gt;

&lt;p&gt;The game is split into &lt;em&gt;legs&lt;/em&gt;, or rounds, with a round ending when all
the five dice having been drawn from the pyramid. At each player&amp;rsquo;s turn,
they can choose to either place bets, or move a camel. The bets can
either be placed on the leg winner, or the overall winner or loser. At
the end of each leg the five dice are placed back into the pyramid and
the bets on the leg winner are settled. The race ends when a camel
crosses the finish line at 16 tiles, this normally takes around 4 legs.&lt;/p&gt;

&lt;p&gt;There is one other mechanic that adds significant complexity to the
game, &lt;em&gt;stacking&lt;/em&gt;. If two camels are on the same tile, they form a
stack, with the camel arriving later being on the top (essentially a
First In / First Out stack). When the dice is rolled for the camel on
the bottom, they will move themselves and any camel stacked on top of
the them by the corresponding amount, meaning there is significant
advantage to being on top of a camel stack.&lt;/p&gt;

&lt;h2 id=&#34;predicting-the-winner&#34;&gt;Predicting the winner&lt;/h2&gt;

&lt;p&gt;One of the reasons why we&amp;rsquo;ve been enjoying Camel Up is that you can
approach it with minimal strategy and just have a laugh (and often do
rather well), or you can over think every decision and try to play with
an optimal strategy (and generally lose in my experience). I like to try
and place educated bets, identifying which camel has the highest
probability of winning the leg or the overall race.&lt;/p&gt;

&lt;p&gt;However, owing to the stacking mechanism, the order in which the dice
are drawn from the pyramid makes a difference to the outcome. For
example, if you have a stack of &lt;code&gt;[blue, red]&lt;/code&gt; camels on tile 3, and you
roll a blue 2 then a red 1, the outcome will be the blue camel on tile
5, and red on tile 6. If you roll the exact same dice values but in the
opposite order, then you end up with the red camel on tile 4, and the
blue camel on tile 5, i.e. the order of the winners has changed.&lt;/p&gt;

&lt;p&gt;To predict the outcome of a leg, yet alone the overall winner, is
therefore very challenging by analytical means. Since my computing
ability is far stronger than my maths, I decided to write a simulation
to identify winning probabilities for each of the camels for a given
game state. I&amp;rsquo;m not the first person to use simulation to estimate
properties of Camel Up, for example I found this &lt;a href=&#34;https://gregstoll.com/~gregstoll/camelcup/&#34; target=&#34;_blank&#34;&gt;blog post by Greg
Stoll&lt;/a&gt; where he uses
simulation to determine the average number of legs in a game, but I am
(as far as I can tell) the first person to use it to estimate winning
probabilities for each of the camels. Greg&amp;rsquo;s simulation does not also
incorporate the mechanic of &lt;em&gt;traps&lt;/em&gt; that I haven&amp;rsquo;t discussed yet. These
are items that players place on a tile that either move the camel stack
forward or backwards by a tile when they land on them.&lt;/p&gt;

&lt;p&gt;To get an idea of how complex the game can get, let&amp;rsquo;s see how many
permutations there are from drawing 5 different dice which each have 3
possible values, where the order of the draw is significant. After
spending 10 minutes trying to determine it analytically and ending up
with a headache, I used simulation.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;camel_cols &amp;lt;- c(&#39;b&#39;, &#39;y&#39;, &#39;r&#39;, &#39;g&#39;, &#39;w&#39;)
dice &amp;lt;- seq(3)
draw_outcome &amp;lt;- function() {
    cam_shuff &amp;lt;- sample(camel_cols, 5, replace=F)
    paste(sapply(seq(5), function(i) {
        paste(cam_shuff[i], sample(dice, 1), sep=&#39;&#39;)
    }), collapse=&#39;_&#39;)
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This function outputs as a string a possible series of 5 draws from the
pyramid:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;draw_outcome()

## [1] &amp;quot;b1_g3_y1_r2_w1&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;By repeating this a large number of times (far greater than we&amp;rsquo;d expect
the number of permutations to be) and counting the number of unique
orderings we can determine the number of permutations (note that I ran
this a few times to check it always output the same number).&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;outcomes &amp;lt;- replicate(1e6, draw_outcome())
length(unique(outcomes))

## [1] 29160
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Yep, with 29,160 possible dice permutations, a simulation approach will
be much easier!&lt;/p&gt;

&lt;h2 id=&#34;r-package&#34;&gt;R package&lt;/h2&gt;

&lt;p&gt;I wrote a Monte Carlo simulation to estimate the outcome probabilities
and wrapped it up into an R package that can be found &lt;a href=&#34;https://github.com/stulacy/CamelUp-Solver&#34; target=&#34;_blank&#34;&gt;on my GitHub
page&lt;/a&gt;. Install the package
with the following command from within RStudio (assuming &lt;code&gt;devtools&lt;/code&gt; is
already installed):&lt;/p&gt;

&lt;p&gt;&lt;code&gt;devtools::install_github(&amp;quot;stulacy/CamelUp-Solver/camelsolve&amp;quot;)&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;The only function that the package provides is called &lt;code&gt;camelsolve&lt;/code&gt;,
which estimates the probability of the following 3 outcomes for every
camel:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Winning the current leg&lt;/li&gt;
&lt;li&gt;Winning the overall race&lt;/li&gt;
&lt;li&gt;Losing the overall race&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The documentation (&lt;code&gt;?camelsolve&lt;/code&gt;) provides full details how to use the
function; essentially it requires a matrix representing the current
location of the camels and traps, a vector indicating which dice have
already been rolled, and the number of simulations to run (defaults to
1000). As the code is written in Rcpp it is very quick, with a thousand
simulations running instantaneously.&lt;/p&gt;

&lt;p&gt;Note that the overall winner/loser probabilities will be slightly
inaccurate as they assume that the traps stay on the same tiles between
legs, when this is not necessarily the case as they are returned to the
players each round. To obtain the most accurate possible results, the
function should be run at the start of each leg when the traps have been
placed.&lt;/p&gt;

&lt;h2 id=&#34;shiny-app&#34;&gt;Shiny app&lt;/h2&gt;

&lt;p&gt;I&amp;rsquo;ve also made a Shiny web-app front-end for the solver, which can be
found &lt;a href=&#34;https://stulacy.shinyapps.io/camelshiny/&#34; target=&#34;_blank&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;/img/camelup_20052017/screenshot_1.png&#34; alt=&#34;Screenshot&#34; /&gt;&lt;/p&gt;

&lt;p&gt;To use it, simply place the camels in their current tiles using the
options in the side-bar. Note that you place the camels at the bottom of
the stack first, so if you have a stack with Blue at the bottom and
Orange on top, add Blue then Orange.&lt;/p&gt;

&lt;p&gt;The colour of the tiles represents their occupants, with camels having
vertical stripes with the stack order going from left to right. Traps
are represented by solid green and red with plus and negative signs for
forward and backwards traps respectively.&lt;/p&gt;

&lt;p&gt;In the board state pictured below, the green camel is on top of the
orange camel on tile 1, the blue camel is on top of the white camel on
tile 3, and the yellow camel is alone on tile 4. There is a solitary
negative trap on tile 6. The only dice that has been rolled so far is
the yellow dice.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;/img/camelup_20052017/screenshot_2.png&#34; alt=&#34;Screenshot&#34; /&gt;&lt;/p&gt;

&lt;p&gt;The Shiny app does provide one small additional piece of functionality
over the R package, in that it repeats the simulations an additional
thousand times to obtain 95% prediction intervals for the predicted
outcomes. The screenshot below details the output of running the
simulation. Unsurprisingly, the blue camel has a very high chance of
winning the current leg; despite the yellow camel being ahead on the
board it has already rolled its dice and so cannot advance any further.
The overall winner column highlights there&amp;rsquo;s no clear winner yet, with 3
camels having very similar chances. This serves as a reminder to not
place bets until sufficient information is available, maybe after 2
complete legs. It is much easier to predict the overall loser, however,
with two camels by far the most likely to lose. This coincides with my
observations after playing around with the solver, that it is generally
far easier to predict who will lose the race owing to the massive
disadvantage of being on the bottom of a stack.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;/img/camelup_20052017/screenshot_3.png&#34; alt=&#34;Screenshot&#34; /&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Building a 2D No Man&#39;s Sky - NASA Space Apps</title>
      <link>/2017/05/05/building-a-2d-no-mans-sky---nasa-space-apps/</link>
      <pubDate>Fri, 05 May 2017 00:00:00 +0100</pubDate>
      
      <guid>/2017/05/05/building-a-2d-no-mans-sky---nasa-space-apps/</guid>
      <description>&lt;p&gt;I&amp;rsquo;ve never really been much of a hacker, I much prefer to think my projects through entirely and plan them out on pen and paper before starting to write any code. As such I&amp;rsquo;ve never really had much interest in a hackathon. With a bit of apprehension then I participated in my first one over the weekend.&lt;/p&gt;

&lt;p&gt;The particular event was &lt;a href=&#34;https://2017.spaceappschallenge.org/&#34; target=&#34;_blank&#34;&gt;NASA Space Apps&lt;/a&gt;, where NASA provide lots of data and offer challenges related to modelling certain natural phenomena, providing data visualisation, or prototype hardware tools that fit a particular niche. I was working with some friends who wanted a bit more freedom and so we choose the challenge that allows you to do whatever you want, at the expense of not being eligible for the grand prize.&lt;/p&gt;

&lt;p&gt;As my friends are interested in game development they wanted to make a procedurally generated space exploration game, loosely based on No Man&amp;rsquo;s Sky. I had no experience whatsoever with game dev so was skeptical if I could bring anything to the group but decided to go along to try something new. Over the course of the weekend I learnt a lot about game dev, especially procedurally generating content, which wasn&amp;rsquo;t actually that foreign to me as I do a fair bit of stochastic simulation in my day job. I quite like procedurally generated games, since, provided the underlying mechanics are well designed, the game world feels organic and immersive, particularly in contrast to AAA games where you can tell the game designer has just put a few corridors filled with generic bad guys to separate boss fights / cutscenes / general exposition.&lt;/p&gt;

&lt;p&gt;We used Python for the primary reason that it&amp;rsquo;s so easy to get something basic up and running, with &lt;code&gt;pygame&lt;/code&gt; providing the game engine and &lt;code&gt;Box2D&lt;/code&gt; the physics. To split up the tasks, we formed the game out of three sections:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Exploring a solar system&lt;/li&gt;
&lt;li&gt;Landing on a planet&lt;/li&gt;
&lt;li&gt;Planet exploration&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Exploring the solar system involves an Asteroids like game, where you dodge asteroids and navigate to planets that are orbiting a star, each potentially having their own moons.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;/img/spaceapps_05052017/space.png&#34; alt=&#34;Exploring a solar system&#34; /&gt;&lt;/p&gt;

&lt;p&gt;Once you touch a planet or moon, the game jumps to the landing stage, which is reminiscent of Lunar Lander style games, where you have to safely control your craft down onto the planet surface.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;/img/spaceapps_05052017/landing.png&#34; alt=&#34;Landing the spaceship&#34; /&gt;&lt;/p&gt;

&lt;p&gt;Once a successful landing had been completed, the game skips to a 2D platformer, where you control the astronaut exploring the planet. This stage is the part I worked on, with a friend doing the terrain generation while I did little bits here and there, such as controlling the astronaut and adding craters to the environment.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;/img/spaceapps_05052017/planet1.png&#34; alt=&#34;Exporing the planet&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;/img/spaceapps_05052017/planet2.png&#34; alt=&#34;Exporing the planet 2&#34; /&gt;
&lt;img src=&#34;/img/spaceapps_05052017/planet3.png&#34; alt=&#34;Exporing the planet 3&#34; /&gt;&lt;/p&gt;

&lt;p&gt;The overall aim of the game is to find a planet that is suitable for sustained life, i.e. one that meets the following requirements:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Sufficient oxygen in the air&lt;/li&gt;
&lt;li&gt;Values of gravity that humans can cope with&lt;/li&gt;
&lt;li&gt;Liveable temperatures&lt;/li&gt;
&lt;li&gt;The existence of water&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Since the game is procedurally generated it can take a while until a suitable planet is found, particularly because there&amp;rsquo;s no guarantee that a suitable planet exists in each solar system. Furthermore, there are 6 main planet archetypes, such as Earth style ones, ice, desert, rock, gas giant, and &lt;em&gt;other&lt;/em&gt;. Each of these have their own unique appearance (the guy who worked on the planet exploration visuals did a great job) in addition to different distributions for the above resources. I.e. a desert planet is not likely to contain water. When you land on a planet these values (oxygen %, gravity value, existence of water, temperature) are not known but become revealed to the player the longer they spend in the planet. You can jump back into the lander to go back up to the space exploration level at any point to find another planet.&lt;/p&gt;

&lt;p&gt;Another aspect to the game is managing three resources:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Fuel&lt;/li&gt;
&lt;li&gt;Health&lt;/li&gt;
&lt;li&gt;Oxygen&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Fuel gets depleted as you use your boosters in both the main space exploration stage and the lander stage, and is also used by your jetpack during the planet exploration minigame. Health gets reduced by colliding with asteroids during space exploration and upon any contact above a certain speed with the ground during the landing stage. Both of these resources get replenished during the planet exploration in the form of random pick-ups dotted around the environment. The final resource, oxygen, is the opposite, as it gets depleted just from spending time on a new planet, but if you retreat back up to your main spaceship it will replenish.&lt;/p&gt;

&lt;p&gt;Overall, I&amp;rsquo;m pleasantly surprised with the progress we made in just over a day. The game is playable, with the procedurally generated content helping replayability, and the art design is very good, particularly during the planet exploration stage. We actually won the user&amp;rsquo;s prize for best project which was a bit of a surprise, as the game doesn&amp;rsquo;t exactly fill any real world niches. If we had more time we&amp;rsquo;d add more content, particularly during the planet exploration stage, allowing the user to mine a planet for its natural resources while dealing with hostile aliens.&lt;/p&gt;

&lt;p&gt;All of our code is &lt;a href=&#34;https://github.com/AndrewJamesTurner/Every-Womans-Ground&#34; target=&#34;_blank&#34;&gt;available on Github&lt;/a&gt;, along with instructions for installing the game. We didn&amp;rsquo;t have time to provide a portable binary wrapper, but installing the required dependencies in a virtual environment doesn&amp;rsquo;t take long and is relatively hassle free. Please feel free to provide feedback on github, we probably won&amp;rsquo;t put too much more effort into it but are always interested to hear what others think.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Predicting AFL results with hierarchical Bayesian models using JAGS</title>
      <link>/2017/04/05/predicting-afl-results-with-hierarchical-bayesian-models-using-jags/</link>
      <pubDate>Wed, 05 Apr 2017 00:00:00 +0100</pubDate>
      
      <guid>/2017/04/05/predicting-afl-results-with-hierarchical-bayesian-models-using-jags/</guid>
      <description>

&lt;p&gt;I&amp;rsquo;ve recently expanded my hierarchical Bayesian football (aka soccer)
prediction &lt;a href=&#34;https://twitter.com/thepredictaball&#34; target=&#34;_blank&#34;&gt;football prediction&lt;/a&gt;
framework to predict the results of Australian Rules Football (AFL)
matches. I have no personal interest in AFL, instead I got involved
through an email sent to a statistics mailing list advertising a
competition that&amp;rsquo;s held by &lt;a href=&#34;http://probabilistic-footy.monash.edu/~footy/&#34; target=&#34;_blank&#34;&gt;Monash University in
Melbourne&lt;/a&gt;. Sensing an
opportunity to quickly adapt my soccer prediction method to AFL results
and to compare my technique to others, I decided to get involved.&lt;/p&gt;

&lt;p&gt;I should note that throughout this competition I haven&amp;rsquo;t spent
significant time on tailoring my Predictaball model to the new task of
AFL prediction, instead I&amp;rsquo;m quite happy to spend the 5 minutes a week of
updating last week&amp;rsquo;s results and obtaining this week&amp;rsquo;s predictions. I
haven&amp;rsquo;t sought out any additional data aside from that which is provided
by the competition organisers, which consists of historical scores going
back to 1998, as well as bookies odds - the latter I don&amp;rsquo;t use at all.&lt;/p&gt;

&lt;h1 id=&#34;data&#34;&gt;Data&lt;/h1&gt;

&lt;p&gt;I first grab the historical training data from an SQLite DB I setup for
this project.&lt;/p&gt;

&lt;p&gt;As with Predictaball, I quantify each team&amp;rsquo;s recent form by their number
of wins in recent games. For the AFL prediction I&amp;rsquo;m currently using the
last 3 games to measure form, but once 5 rounds have been played I&amp;rsquo;ll
increase this up to 5.&lt;/p&gt;

&lt;p&gt;Note that the aim of this competition isn&amp;rsquo;t to provide probabilities of
all 3 outcomes (home win, away win, draw), but rather to estimate the
probability of the home team winning. As a result, I create a new dummy
target variable as a binary value of whether the home team won or not.
If I was interested in predicting all 3 outcomes (as I am with
Predictaball), then I&amp;rsquo;d use an ordered logit regression, but this
simplification allows us to model the outcome as being binomially
distributed.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;# sel_data is the data frame containing results extracted from my DB
sel_data$outcome2 &amp;lt;- factor(sel_data$outcome == &#39;h&#39;, labels=c(&#39;n&#39;, &#39;y&#39;))
head(sel_data)
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;    ##          home       away hwon hdrawn hlost awon adrawn alost outcome
    ## 1    St_Kilda  Fremantle    2      0     1    2      0     1       a
    ## 2     Carlton   Essendon    3      0     0    3      0     0       a
    ## 3 Collingwood P_Adelaide    1      0     2    1      0     2       h
    ## 4    Adelaide G_W_Sydney    2      0     1    0      0     3       h
    ## 5    Brisbane Gold_Coast    1      0     2    0      0     3       h
    ## 6     W_Coast   Hawthorn    3      0     0    2      0     1       h
    ##   season outcome2
    ## 1   2012        n
    ## 2   2012        n
    ## 3   2012        y
    ## 4   2012        y
    ## 5   2012        y
    ## 6   2012        y
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Due to the long time taken to fit a Bayesian model, I can&amp;rsquo;t feasibly run
cross-validation for either model selection or evaluation. For model
selection this isn&amp;rsquo;t an issue since I&amp;rsquo;m being lazy and just building a
very similar functional form to that which I currently use for soccer
prediction. For model evaluation this isn&amp;rsquo;t a major concern either as
the model will get assessed at the end of each week automatically by the
competition organisers.&lt;/p&gt;

&lt;p&gt;To obtain an idea of how well my models are fitting, I&amp;rsquo;ll use a single
holdout set, taken as the most recent season. I&amp;rsquo;ll use all the other 18
seasons for fitting the model.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;train_df &amp;lt;- sel_data %&amp;gt;%
                filter(season != 2016) %&amp;gt;%
                dplyr::select(-season)
test_df &amp;lt;- sel_data %&amp;gt;%
                filter(season == 2016) %&amp;gt;%
                dplyr::select(-season)
head(train_df)
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;    ##          home       away hwon hdrawn hlost awon adrawn alost outcome
    ## 1    St_Kilda  Fremantle    2      0     1    2      0     1       a
    ## 2     Carlton   Essendon    3      0     0    3      0     0       a
    ## 3 Collingwood P_Adelaide    1      0     2    1      0     2       h
    ## 4    Adelaide G_W_Sydney    2      0     1    0      0     3       h
    ## 5    Brisbane Gold_Coast    1      0     2    0      0     3       h
    ## 6     W_Coast   Hawthorn    3      0     0    2      0     1       h
    ##   outcome2
    ## 1        n
    ## 2        n
    ## 3        y
    ## 4        y
    ## 5        y
    ## 6        y
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The proportion of home wins is:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;table(train_df$outcome2) / nrow(train_df) * 100
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;##        n        y 
## 41.90412 58.09588
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;So we really want to beat 60% to obtain a useful model.&lt;/p&gt;

&lt;h1 id=&#34;benchmark-models&#34;&gt;Benchmark models&lt;/h1&gt;

&lt;p&gt;In the previous section I stated that I wouldn&amp;rsquo;t be performing any model
evaluation. This isn&amp;rsquo;t entirely true, as I&amp;rsquo;ll compare the fully Bayesian
model to a Naive Bayes classifier that can train in a fraction (seconds
rather than an hour) of the time needed. I&amp;rsquo;ll also use an &lt;code&gt;xgBoost&lt;/code&gt;
implementation for a more complex, but still quicker to fit, model.&lt;/p&gt;

&lt;p&gt;These benchmark models will be rather naive models, only provided each
team&amp;rsquo;s form, rather than any measure of team strength. Thus it would be
assumed the fully Bayesian model will be more accurate. Also note that
again I&amp;rsquo;m being lazy and just using the default &lt;code&gt;caret&lt;/code&gt; tuning grid for
these learning algorithms.&lt;/p&gt;

&lt;p&gt;For these benchmark classifiers, I&amp;rsquo;ll use a basic caret training
procedure with repeated cross-validation and the log-loss cost function.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;tr &amp;lt;- trainControl(method=&#39;repeatedcv&#39;,
                   number=10,
                   repeats=5,
                   classProbs=T,
                   summaryFunction=mnLogLoss
                   )
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;naive-bayes&#34;&gt;Naive Bayes&lt;/h2&gt;

&lt;p&gt;The Naive Bayes classifier fits in seconds.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;set.seed(3)
nb &amp;lt;- train(outcome2 ~ hwon + awon, 
            method=&#39;nb&#39;,
            metric=&#39;logLoss&#39;,
            trControl=tr,
            data=train_df)
nb
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;## Naive Bayes 
## 
## 2983 samples
##    2 predictors
##    2 classes: &#39;n&#39;, &#39;y&#39; 
## 
## No pre-processing
## Resampling: Cross-Validated (10 fold, repeated 5 times) 
## Summary of sample sizes: 2685, 2685, 2685, 2685, 2685, 2684, ... 
## Resampling results across tuning parameters:
## 
##   usekernel  logLoss  
##   FALSE      0.6407220
##    TRUE      0.6521055
## 
## Tuning parameter &#39;fL&#39; was held constant at a value of 0
## Tuning
##  parameter &#39;adjust&#39; was held constant at a value of 1
## logLoss was used to select the optimal model using  the smallest value.
## The final values used for the model were fL = 0, usekernel = FALSE
##  and adjust = 1.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;While the log-loss is a useful cost measure for classification tasks, it
is not that interpretable; what does a log-loss value of 0.64 actually
mean? It&amp;rsquo;ll be useful to compare it to other models but on its own it
doesn&amp;rsquo;t allow for an intuitive appreciation of model fit.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;min(nb$results$logLoss)
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;## [1] 0.640722
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This is where it can be useful to obtain the model&amp;rsquo;s accuracy to obtain
an idea of how much practical relevance the model has. This model&amp;rsquo;s
accuracy on its training set is 62%, as shown below, which isn&amp;rsquo;t amazing
considering the oracle accuracy is 60%, but isn&amp;rsquo;t too bad when
considering the only inputs to this classifier are the last three
results.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;mean(predict(nb, newdata=train_df) == train_df$outcome2)
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;## [1] 0.6221924
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;xgboost&#34;&gt;xgBoost&lt;/h2&gt;

&lt;p&gt;Let&amp;rsquo;s see if a state-of-the-art machine learning algorithm can do any
better than the naive bayes. Also note that we can provide the home and
away team here since tree-based methods can handle low-variance
categorical data far better than the Naive Bayes (which wouldn&amp;rsquo;t
converge with these factors). However, note that this &lt;strong&gt;isn&amp;rsquo;t&lt;/strong&gt; a
hierarchical model, i.e. the xgBoost tree doesn&amp;rsquo;t recognise that the
value of Sydney as a home team is the same team as the Sydney in the
away team input.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;set.seed(3)
xgb &amp;lt;- train(outcome2 ~ home + away + hwon + awon, 
             data=train_df,
             metric=&#39;logLoss&#39;,
             trControl=tr,
             method=&#39;xgbTree&#39;)
xgb
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;## eXtreme Gradient Boosting 
## 
## 2983 samples
##    4 predictors
##    2 classes: &#39;n&#39;, &#39;y&#39; 
## 
## No pre-processing
## Resampling: Cross-Validated (10 fold, repeated 5 times) 
## Summary of sample sizes: 2685, 2685, 2685, 2685, 2685, 2684, ... 
## Resampling results across tuning parameters:
## 
##   eta  max_depth  colsample_bytree  subsample  nrounds  logLoss  
##   0.3  1          0.6               0.50        50      0.6340194
##   0.3  1          0.6               0.50       100      0.6341923
##   0.3  1          0.6               0.50       150      0.6339301
##   0.3  1          0.6               0.75        50      0.6332515
##   0.3  1          0.6               0.75       100      0.6327496
##   0.3  1          0.6               0.75       150      0.6331829
##   0.3  1          0.6               1.00        50      0.6343153
##   0.3  1          0.6               1.00       100      0.6317279
##   0.3  1          0.6               1.00       150      0.6316498
##   0.3  1          0.8               0.50        50      0.6340190
##   0.3  1          0.8               0.50       100      0.6348201
##   0.3  1          0.8               0.50       150      0.6350264
##   0.3  1          0.8               0.75        50      0.6332341
##   0.3  1          0.8               0.75       100      0.6327092
##   0.3  1          0.8               0.75       150      0.6336241
##   0.3  1          0.8               1.00        50      0.6342879
##   0.3  1          0.8               1.00       100      0.6316945
##   0.3  1          0.8               1.00       150      0.6316395
##   0.3  2          0.6               0.50        50      0.6352954
##   0.3  2          0.6               0.50       100      0.6380391
##   0.3  2          0.6               0.50       150      0.6410072
##   0.3  2          0.6               0.75        50      0.6325316
##   0.3  2          0.6               0.75       100      0.6369984
##   0.3  2          0.6               0.75       150      0.6411875
##   0.3  2          0.6               1.00        50      0.6323639
##   0.3  2          0.6               1.00       100      0.6363287
##   0.3  2          0.6               1.00       150      0.6402175
##   0.3  2          0.8               0.50        50      0.6358888
##   0.3  2          0.8               0.50       100      0.6392647
##   0.3  2          0.8               0.50       150      0.6431819
##   0.3  2          0.8               0.75        50      0.6338695
##   0.3  2          0.8               0.75       100      0.6378576
##   0.3  2          0.8               0.75       150      0.6420315
##   0.3  2          0.8               1.00        50      0.6322382
##   0.3  2          0.8               1.00       100      0.6361102
##   0.3  2          0.8               1.00       150      0.6398716
##   0.3  3          0.6               0.50        50      0.6394713
##   0.3  3          0.6               0.50       100      0.6471032
##   0.3  3          0.6               0.50       150      0.6544207
##   0.3  3          0.6               0.75        50      0.6369555
##   0.3  3          0.6               0.75       100      0.6479796
##   0.3  3          0.6               0.75       150      0.6564616
##   0.3  3          0.6               1.00        50      0.6370824
##   0.3  3          0.6               1.00       100      0.6473225
##   0.3  3          0.6               1.00       150      0.6553860
##   0.3  3          0.8               0.50        50      0.6426640
##   0.3  3          0.8               0.50       100      0.6514799
##   0.3  3          0.8               0.50       150      0.6617544
##   0.3  3          0.8               0.75        50      0.6398737
##   0.3  3          0.8               0.75       100      0.6505461
##   0.3  3          0.8               0.75       150      0.6598278
##   0.3  3          0.8               1.00        50      0.6375502
##   0.3  3          0.8               1.00       100      0.6478913
##   0.3  3          0.8               1.00       150      0.6571539
##   0.4  1          0.6               0.50        50      0.6339718
##   0.4  1          0.6               0.50       100      0.6354407
##   0.4  1          0.6               0.50       150      0.6349708
##   0.4  1          0.6               0.75        50      0.6331067
##   0.4  1          0.6               0.75       100      0.6337126
##   0.4  1          0.6               0.75       150      0.6341673
##   0.4  1          0.6               1.00        50      0.6328334
##   0.4  1          0.6               1.00       100      0.6316159
##   0.4  1          0.6               1.00       150      0.6320620
##   0.4  1          0.8               0.50        50      0.6337016
##   0.4  1          0.8               0.50       100      0.6340724
##   0.4  1          0.8               0.50       150      0.6341252
##   0.4  1          0.8               0.75        50      0.6327357
##   0.4  1          0.8               0.75       100      0.6338157
##   0.4  1          0.8               0.75       150      0.6341898
##   0.4  1          0.8               1.00        50      0.6328583
##   0.4  1          0.8               1.00       100      0.6315859
##   0.4  1          0.8               1.00       150      0.6320476
##   0.4  2          0.6               0.50        50      0.6364542
##   0.4  2          0.6               0.50       100      0.6398969
##   0.4  2          0.6               0.50       150      0.6452034
##   0.4  2          0.6               0.75        50      0.6357187
##   0.4  2          0.6               0.75       100      0.6404164
##   0.4  2          0.6               0.75       150      0.6458445
##   0.4  2          0.6               1.00        50      0.6340203
##   0.4  2          0.6               1.00       100      0.6395627
##   0.4  2          0.6               1.00       150      0.6437687
##   0.4  2          0.8               0.50        50      0.6384505
##   0.4  2          0.8               0.50       100      0.6435016
##   0.4  2          0.8               0.50       150      0.6485120
##   0.4  2          0.8               0.75        50      0.6371693
##   0.4  2          0.8               0.75       100      0.6432734
##   0.4  2          0.8               0.75       150      0.6478184
##   0.4  2          0.8               1.00        50      0.6343541
##   0.4  2          0.8               1.00       100      0.6402530
##   0.4  2          0.8               1.00       150      0.6450308
##   0.4  3          0.6               0.50        50      0.6447538
##   0.4  3          0.6               0.50       100      0.6598096
##   0.4  3          0.6               0.50       150      0.6694833
##   0.4  3          0.6               0.75        50      0.6431007
##   0.4  3          0.6               0.75       100      0.6569459
##   0.4  3          0.6               0.75       150      0.6699318
##   0.4  3          0.6               1.00        50      0.6401776
##   0.4  3          0.6               1.00       100      0.6541456
##   0.4  3          0.6               1.00       150      0.6640595
##   0.4  3          0.8               0.50        50      0.6471922
##   0.4  3          0.8               0.50       100      0.6634678
##   0.4  3          0.8               0.50       150      0.6748524
##   0.4  3          0.8               0.75        50      0.6458011
##   0.4  3          0.8               0.75       100      0.6607604
##   0.4  3          0.8               0.75       150      0.6734770
##   0.4  3          0.8               1.00        50      0.6419818
##   0.4  3          0.8               1.00       100      0.6560187
##   0.4  3          0.8               1.00       150      0.6670558
## 
## Tuning parameter &#39;gamma&#39; was held constant at a value of 0
## 
## Tuning parameter &#39;min_child_weight&#39; was held constant at a value of 1
## logLoss was used to select the optimal model using  the smallest value.
## The final values used for the model were nrounds = 100, max_depth = 1,
##  eta = 0.4, gamma = 0, colsample_bytree = 0.8, min_child_weight = 1
##  and subsample = 1.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The xgBoost model has a lower log-loss (0.63 to 0.64) than the naive
bayes, but this could be expected owing to the more complex model with a
larger number of paramters. Does this difference have any significant
impact on the model&amp;rsquo;s ability to accurately predict the outcome of
future AFL matches?&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;min(xgb$results$logLoss)
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;## [1] 0.6315859
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;As with the Naive Bayes model, the training set accuracy is calculated.
65% is actually a fair bit better than the Naive Bayes score of 62%,
which is interesting as their logloss wasn&amp;rsquo;t that different.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;mean(predict(xgb, newdata=train_df) == train_df$outcome2)
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;## [1] 0.6526986
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Overall then, not a drastically brilliant performance from either
xgBoost or the Naive Bayes model. Perhaps there is simply not sufficient
information available in the form predictors I use to accurately predict
matches. As I&amp;rsquo;m not personally overly interested in AFL results, and
owing to the time-constraints of the already-underway Monash
competition, I&amp;rsquo;m not willing to obtain additional information to help
improve this model. Maybe providing a hierarchical model with an input
corresponding to team strength will help, as demonstrated by the fully
Bayesian model.&lt;/p&gt;

&lt;h1 id=&#34;hierarchical-bayesian-model&#34;&gt;Hierarchical Bayesian Model&lt;/h1&gt;

&lt;h2 id=&#34;model-definition&#34;&gt;Model definition&lt;/h2&gt;

&lt;p&gt;The model itself is a rather simple hierarchical model with a logit link
since we have a binary outcome. We model the logit probability of a home
win as the linear predictor of the inputs, i.e.:&lt;/p&gt;

&lt;p&gt;$$logit(p_{i})=\alpha + skill_{home} − skill_{away} + \beta z_{i}$$&lt;/p&gt;

&lt;p&gt;Where $z$ is a vector comprising:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;$hw$: The number of wins from the home team in the last 3 matches&lt;/li&gt;
&lt;li&gt;$aw$: The number of wins from the away team in the last 3 matches&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Note that this hierarchical model has two levels, one is the individual
match level predictors, for which we have form for both the away and
home team, and a team level model, which currently consists of
intercepts for both teams. The predictors in this instance are actually
team-level variables; better examples of match-level inputs would
include date, temperature, and stadium.&lt;/p&gt;

&lt;p&gt;Unlike the xgBoost classifier, the fully Bayesian model will assign a
single skill value for each team, no matter whether they are home or
away. This allows for a simpler model that in theory should be able to
better capture any trends. of course this model assumes that each team&amp;rsquo;s
skill is independent of whether they are home or away, and the
difference between a team&amp;rsquo;s home and away skill is always the same and
can be represented by $\alpha$.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;m_string &amp;lt;- &amp;quot;model {
for (i in 1:ngames) {
    # Linear predictor. Now need to obtain probability as logit of LP
    mu[i] &amp;lt;- alpha + skill[hometeam[i]] - skill[awayteam[i]] + beta_hw * homewin[i] + beta_aw * awaywin[i] 

    logit(p[i]) &amp;lt;- mu[i]
    result[i] ~ dbern(p[i])
}

    # Priors over coefficients
    alpha ~ dnorm(0, 1.0E-3)
    beta_hw ~ dnorm(0, 1.0E-3)
    beta_aw ~ dnorm(0, 1.0E-3)
    
    # Prior for skill, with 0 as baseline
    skill[1] &amp;lt;- 0
    for(j in 2:nteams) {
        skill[j] ~ dnorm(group_skill, group_tau)
    }
    
    # Note that the skill variance was listed as 16, but here need the reciprocal
    # as JAGS uses tau
    group_skill ~ dnorm(0, 0.0625)
    group_tau &amp;lt;- 1 / pow(group_sigma, 2)
    group_sigma ~ dunif(0, 3)
}&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;teams &amp;lt;- unique(c(train_df$home, train_df$away))
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;JAGS requires a list of the data inputs for the model, this is where the
continuous covariates are scaled to aid convergence.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;# Pass data into model
data_list &amp;lt;- list(result = as.numeric(train_df$outcome2)-1,
                  hometeam = as.numeric(factor(train_df$home, 
                                               levels=teams)),
                  awayteam = as.numeric(factor(train_df$away, 
                                               levels=teams)),
                  homewin = train_df$hwon - mean(train_df$hwon),
                  awaywin = train_df$awon - mean(train_df$awon),
                  ngames = nrow(train_df),
                  nteams = length(teams)
                 )
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The final thing we need to help convergence is some initial estimates
for the coefficients, which can be easily provided with a maximum
likelihood estimate of the form factors:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;lr &amp;lt;- glm(outcome2 ~ hwon + awon, data=train_df, family = binomial(link=&#39;logit&#39;))
lr
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;## 
## Call:  glm(formula = outcome2 ~ hwon + awon, family = binomial(link = &amp;quot;logit&amp;quot;), 
##     data = train_df)
## 
## Coefficients:
## (Intercept)         hwon         awon  
##      0.2296       0.5008      -0.3925  
## 
## Degrees of Freedom: 2982 Total (i.e. Null);  2980 Residual
## Null Deviance:       4057 
## Residual Deviance: 3821  AIC: 3827
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;As expected, winning previous games has a positive impact on the
probability of a home win, increasing the log-odds by 0.5.
Unsurprisingly, the away team winning recent games has a negative impact
on the home team&amp;rsquo;s chances.&lt;/p&gt;

&lt;p&gt;The intercept provides the home-win probability when both teams are at
average form, which is:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;1 / (1 + exp(-0.2296))
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;## [1] 0.5571492
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This is slightly lower than the 58% as indicated on the training set but
again highlights the home advantage.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;table(train_df$outcome2) / nrow(train_df)
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;## 
##         n         y 
## 0.4190412 0.5809588
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;model-fitting&#34;&gt;Model Fitting&lt;/h2&gt;

&lt;p&gt;I&amp;rsquo;ll build this model using a relatively large number of iterations
since it doesn&amp;rsquo;t take comparatively too long (~20 mins).&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;m &amp;lt;- jags.model(textConnection(m_string), data=data_list, 
                inits=list(beta_hw=coef(lr)[&#39;hwon&#39;],
                           beta_aw=coef(lr)[&#39;awon&#39;]),
                n.chains=3, n.adapt=10000)
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;## Compiling model graph
##    Resolving undeclared variables
##    Allocating nodes
## Graph information:
##    Observed stochastic nodes: 2983
##    Unobserved stochastic nodes: 22
##    Total graph size: 19408
## 
## Initializing model
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Need to run some burn-in too, again can use a rather large value here
since this process doesn&amp;rsquo;t take too long.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;update(m, 10000)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The final step in using JAGS is to actually obtain our samples from the
posterior.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;s &amp;lt;- coda.samples(m, variable.names = c(&amp;quot;alpha&amp;quot;, &amp;quot;skill&amp;quot;, &amp;quot;group_skill&amp;quot;, &amp;quot;group_sigma&amp;quot;, &amp;quot;beta_hw&amp;quot;, &amp;quot;beta_aw&amp;quot;), 
                  n.iter=10000, thin=2)
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;plot(s)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&#34;/img/afl_05042017/convergence.png&#34; alt=&#34;&#34; /&gt;
&lt;img src=&#34;/img/afl_05042017/convergence2.png&#34; alt=&#34;&#34; /&gt;
&lt;img src=&#34;/img/afl_05042017/convergence3.png&#34; alt=&#34;&#34; /&gt;
&lt;img src=&#34;/img/afl_05042017/convergence4.png&#34; alt=&#34;&#34; /&gt;
&lt;img src=&#34;/img/afl_05042017/convergence5.png&#34; alt=&#34;&#34; /&gt;
&lt;img src=&#34;/img/afl_05042017/convergence6.png&#34; alt=&#34;&#34; /&gt;
&lt;img src=&#34;/img/afl_05042016/convergence7.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;The diagnostics generally look pretty good (although it can be hard to tell from the scaled down images above), with all parameters reaching
a satisfactory convergence. The parameter values seem seasonable too,
with $\alpha$, $\beta_{hw}$ and $\beta_{aw}$ having mean
values close to the MLEs. The differences, for example the baseline
having a mean here of around 0.35 compared to 0.23 from the MLE, can be
ascribed to including additional team skill parameters.&lt;/p&gt;

&lt;h2 id=&#34;assessing-fit&#34;&gt;Assessing fit&lt;/h2&gt;

&lt;p&gt;Let&amp;rsquo;s assess model fit further by estimating its accuracy on the
training set. This requires a function to predict a given match,
similarly to how &lt;code&gt;caret&lt;/code&gt; provides a &lt;code&gt;predict&lt;/code&gt; method for each learning
algorithm.&lt;/p&gt;

&lt;p&gt;The first step is to extract the samples of the parameters for future
use.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;ms &amp;lt;- as.matrix(s)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The team skill intercepts are integer-indexed, so we&amp;rsquo;ll define a helper
function to extract the appropriate column for a given team name.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;team_col &amp;lt;- function(team) {
    index &amp;lt;- which(teams == team)
    paste0(&amp;quot;skill[&amp;quot;, index, &amp;quot;]&amp;quot;)
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Another helper function is the logistic function.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;logistic &amp;lt;- function(x) 1 / (1 + exp(-x))
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Calculating the match probabilities from parameters simply involves
calculating the linear predictor specified in the JAGS model and then
drawing from the Bernouilli trial with the resulting estimated
probability. I don&amp;rsquo;t see much difference with either reporting the
parameter $p$ as the output of this function or the proportion of
Bernouilli trials that were in favour of a home win. The former is more
useful when we want an estimate of confidence but for this simple use
case the latter will suffice.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;predict_match &amp;lt;- function(home, away, hwon, awon) {
    # Form team coefficient 
    home_col &amp;lt;- team_col(home)
    away_col &amp;lt;- team_col(away)
    
    # Calculate lp
    lp &amp;lt;- ms[, &#39;alpha&#39;] + ms[, home_col] - ms[, away_col] + ms[, &amp;quot;beta_hw&amp;quot;] * (hwon - mean(train_df$hwon)) + ms[, &amp;quot;beta_aw&amp;quot;] * (awon - mean(train_df$awon))
    
    # Calculate parameter for bernouilli trial
    p &amp;lt;- logistic(lp)
    
    results &amp;lt;- rbinom(length(p), size=1, prob=p)
    # This gives draws from the distribution, can then obtain probabilities as the proportion of occurrences
    table(results) / length(results)
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This function returns the predicted probability for each outcome as
follows:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;predict_match(&amp;quot;Melbourne&amp;quot;, &amp;quot;Richmond&amp;quot;, 3, 2)
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;## results
##         0         1 
## 0.3160667 0.6839333
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Without knowing anything about these 2 teams, this prediction that the
home team have a significant advantage seems reasonable, particularly
since they&amp;rsquo;ve won all 3 of their last game.s&lt;/p&gt;

&lt;p&gt;I&amp;rsquo;ll just make a wrapper around this to return the outcome with the
highest probability to be used to calculate accuracy:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;predict_match_outcome &amp;lt;- function(home, away, hwon, awon) {
    probs &amp;lt;- predict_match(home, away, hwon, awon)
    c(&#39;n&#39;, &#39;y&#39;)[which.max(probs)]
}
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;predict_match_outcome(&amp;quot;Melbourne&amp;quot;, &amp;quot;Richmond&amp;quot;, 3, 2)
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;## [1] &amp;quot;y&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Remembering of course that &lt;code&gt;n&lt;/code&gt; means &lt;em&gt;away win or draw&lt;/em&gt; and &lt;code&gt;y&lt;/code&gt; means
&lt;em&gt;home win&lt;/em&gt;. It&amp;rsquo;s ordered in this manner since the aim of the AFL
competition is to predict the home win probability.&lt;/p&gt;

&lt;p&gt;Let&amp;rsquo;s have a look at the training set accuracy then, firstly need to
obtain the predicted outcomes for each game in the training set:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;train_preds &amp;lt;- apply(train_df, 1, function(row) {
    predict_match_outcome(row[1], row[2], 
                          as.numeric(row[3]),
                          as.numeric(row[6])
                          )
})
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Leading to an accuracy on the training set of:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;mean(train_preds == train_df$outcome2)
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;## [1] 0.6463292
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This is about 3% better than the Naive Bayes and the Boosted Tree
classifiers which both got 62% on the training set, but isn&amp;rsquo;t a huge
difference given the increase in model complexity.&lt;/p&gt;

&lt;p&gt;A more useful comparison is in terms of the log-loss, which &lt;code&gt;caret&lt;/code&gt;
calculates for the benchmark models so I&amp;rsquo;ll make a quick implementation
here.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;logloss &amp;lt;- function(actual, predicted) {
   - (sum(actual * log(predicted) + (1 - actual) * log(1 - predicted))) / length(actual)
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;To use this function we need to calculate the probability estimates of a
home win as follows:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;train_prob_preds &amp;lt;- apply(train_df, 1, function(row) {
    predict_match(row[1], row[2], 
                  as.numeric(row[3]),
                  as.numeric(row[6])
                  )[2] # Extract home win probability
})
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;# -1 since factors are 1-indexed
logloss(as.numeric(train_df$outcome2)-1, train_prob_preds)
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;## [1] 0.6264894
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Firstly, remember that the log-loss scores output by &lt;code&gt;caret&lt;/code&gt; are the
cross-validated score resulting from the optimal parameters and so
aren&amp;rsquo;t directly comparable to this value above that was calculated from
the entire training set. That said, this value is better than that from
the xgBoost and very similar to the Naive Bayes model. However, as ever,
models can&amp;rsquo;t be compared on the training set for their predictive value.&lt;/p&gt;

&lt;h1 id=&#34;comparison-on-the-test-set&#34;&gt;Comparison on the test set&lt;/h1&gt;

&lt;p&gt;A more useful comparison between models is on data that the model hasn&amp;rsquo;t
seen before. In particular &amp;rsquo;ll just run a single comparison on the test
set. This isn&amp;rsquo;t ideal; I really should use cross-validation for all
models but it&amp;rsquo;s just far too computationally demanding to use with a
Bayesian model fit with JAGS. Also, this test set is relatively small
(180 observations), but it&amp;rsquo;ll do for a rough comparison.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;nb_prob_preds &amp;lt;- predict(nb, test_df, type = &amp;quot;prob&amp;quot;)[2]  # index to extract home win probs

xgb_prob_preds &amp;lt;- predict(xgb, test_df, type=&amp;quot;prob&amp;quot;)[2]

bayes_prob_preds &amp;lt;- apply(test_df, 1, function(row) {
    predict_match(row[1], row[2], 
                          as.numeric(row[3]),
                          as.numeric(row[6])
                          )[2]
})
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;lapply(list(&#39;nb&#39;=nb_prob_preds, &#39;xgb&#39;=xgb_prob_preds, &#39;bayes&#39;=bayes_prob_preds),
       function(preds) logloss(as.numeric(test_df$outcome2)-1, preds))
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;## $nb
## [1] 0.6037337
## 
## $xgb
## [1] 0.6200396
## 
## $bayes
## [1] 0.6056966
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Surprisingly, the fully hierarchical Bayesian model and the Naive Bayes
model which only uses measures of form perform extremely similarly. I
would have expected the addition of the team skill levels to enable the
Bayesian model to produce more accurate estimates.&lt;/p&gt;

&lt;p&gt;Let&amp;rsquo;s compare the models using the standard accuracy measure:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;nb_preds &amp;lt;- predict(nb, test_df)

xgb_preds &amp;lt;- predict(xgb, test_df)

bayes_preds &amp;lt;- apply(test_df, 1, function(row) {
    predict_match_outcome(row[1], row[2], 
                          as.numeric(row[3]),
                          as.numeric(row[6])
                          )
})
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;lapply(list(&#39;nb&#39;=nb_preds, &#39;xgb&#39;=xgb_preds, &#39;bayes&#39;=bayes_preds),
       function(preds) mean(preds == test_df$outcome2))
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;## $nb
## [1] 0.6944444
## 
## $xgb
## [1] 0.6666667
## 
## $bayes
## [1] 0.6777778
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;As with the log-loss comparison, the Naive Bayes model is rated as the
most accurate. An interesting point to make is that all 3 models
performed better on the test set than the training data, according to
both evaluation criteria. We would not expect this to be the case, and
so it hints that this particular test set isn&amp;rsquo;t representative of the
data. This could also be related to the small sample size of this test
set.&lt;/p&gt;

&lt;p&gt;Given these two results, which model would we choose to use for the
final application? This highlights the importance of being aware of how
your model will be used. For example, in the AFl prediction league, the
models are assessed by &lt;a href=&#34;http://stackoverflow.com/questions/1859554/what-is-entropy-and-information-gain&#34; target=&#34;_blank&#34;&gt;information
gain&lt;/a&gt;,
which is a similar function to logloss, and so I will choose models that
performed well on this criteria. In other situations, particularly those
with unequal costs, &lt;a href=&#34;https://en.wikipedia.org/wiki/Receiver_operating_characteristic&#34; target=&#34;_blank&#34;&gt;Receiver Operating
Characteristics&lt;/a&gt;
may be more appropriate. Accuracy is useful in terms of being easy to
understand and relate to, but often it can be misleading, particularly
when the classes are imbalanced. In this situation &lt;a href=&#34;https://en.wikipedia.org/wiki/Cohen&#39;s_kappa&#34; target=&#34;_blank&#34;&gt;Cohen&amp;rsquo;s
Kappa&lt;/a&gt; is a useful
statistic.&lt;/p&gt;

&lt;h1 id=&#34;conclusions&#34;&gt;Conclusions&lt;/h1&gt;

&lt;p&gt;Despite the fully Bayesian model not having the best logloss on the test
set, I&amp;rsquo;m going to use it for the AFL predictions. I shouldn&amp;rsquo;t read too
much into the results of one (potentially unreliable) test set and the
Bayesian model was best on the training set. Again, it&amp;rsquo;d be ideal to
compare these models under cross-validation but JAGS&amp;rsquo; long fitting time
renders this unfeasible.&lt;/p&gt;

&lt;p&gt;I hope this short guide has provided a brief tutorial on using JAGS, as
well as sports forecasting. This AFL prediction competition is an
interesting case study as the data set is already provided, which saves
the effort of manually scraping it. It does, however, tend to restrict
you to using predictors already available. For sports that I have more
of an understanding of, such as (real) football, I am aware of what
other factors could be useful to include. However, there always runs the
risk of adding too many inputs for what is a very noisy problem and
thereby allowing models to overfit easily. This is where effective
diagnostics are required, particularly in visualising the difference
between the training and test set, although this is not something I&amp;rsquo;ve
covered in this article.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Example Talk</title>
      <link>/talk/example-talk/</link>
      <pubDate>Sun, 01 Jan 2017 00:00:00 +0000</pubDate>
      
      <guid>/talk/example-talk/</guid>
      <description>&lt;p&gt;Embed your slides or video here using &lt;a href=&#34;https://gcushen.github.io/hugo-academic-demo/post/writing-markdown-latex/&#34; target=&#34;_blank&#34;&gt;shortcodes&lt;/a&gt;. Further details can easily be added using &lt;em&gt;Markdown&lt;/em&gt; and $\rm \LaTeX$ math code.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Deep Learning</title>
      <link>/project/deep-learning/</link>
      <pubDate>Wed, 27 Apr 2016 00:00:00 +0000</pubDate>
      
      <guid>/project/deep-learning/</guid>
      <description>&lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim. Donec condimentum, sem id dapibus fringilla, tellus enim condimentum arcu, nec volutpat est felis vel metus. Vestibulum sit amet erat at nulla eleifend gravida.&lt;/p&gt;

&lt;p&gt;Nullam vel molestie justo. Curabitur vitae efficitur leo. In hac habitasse platea dictumst. Sed pulvinar mauris dui, eget varius purus congue ac. Nulla euismod, lorem vel elementum dapibus, nunc justo porta mi, sed tempus est est vel tellus. Nam et enim eleifend, laoreet sem sit amet, elementum sem. Morbi ut leo congue, maximus velit ut, finibus arcu. In et libero cursus, rutrum risus non, molestie leo. Nullam congue quam et volutpat malesuada. Sed risus tortor, pulvinar et dictum nec, sodales non mi. Phasellus lacinia commodo laoreet. Nam mollis, erat in feugiat consectetur, purus eros egestas tellus, in auctor urna odio at nibh. Mauris imperdiet nisi ac magna convallis, at rhoncus ligula cursus.&lt;/p&gt;

&lt;p&gt;Cras aliquam rhoncus ipsum, in hendrerit nunc mattis vitae. Duis vitae efficitur metus, ac tempus leo. Cras nec fringilla lacus. Quisque sit amet risus at ipsum pharetra commodo. Sed aliquam mauris at consequat eleifend. Praesent porta, augue sed viverra bibendum, neque ante euismod ante, in vehicula justo lorem ac eros. Suspendisse augue libero, venenatis eget tincidunt ut, malesuada at lorem. Donec vitae bibendum arcu. Aenean maximus nulla non pretium iaculis. Quisque imperdiet, nulla in pulvinar aliquet, velit quam ultrices quam, sit amet fringilla leo sem vel nunc. Mauris in lacinia lacus.&lt;/p&gt;

&lt;p&gt;Suspendisse a tincidunt lacus. Curabitur at urna sagittis, dictum ante sit amet, euismod magna. Sed rutrum massa id tortor commodo, vitae elementum turpis tempus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean purus turpis, venenatis a ullamcorper nec, tincidunt et massa. Integer posuere quam rutrum arcu vehicula imperdiet. Mauris ullamcorper quam vitae purus congue, quis euismod magna eleifend. Vestibulum semper vel augue eget tincidunt. Fusce eget justo sodales, dapibus odio eu, ultrices lorem. Duis condimentum lorem id eros commodo, in facilisis mauris scelerisque. Morbi sed auctor leo. Nullam volutpat a lacus quis pharetra. Nulla congue rutrum magna a ornare.&lt;/p&gt;

&lt;p&gt;Aliquam in turpis accumsan, malesuada nibh ut, hendrerit justo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque sed erat nec justo posuere suscipit. Donec ut efficitur arcu, in malesuada neque. Nunc dignissim nisl massa, id vulputate nunc pretium nec. Quisque eget urna in risus suscipit ultricies. Pellentesque odio odio, tincidunt in eleifend sed, posuere a diam. Nam gravida nisl convallis semper elementum. Morbi vitae felis faucibus, vulputate orci placerat, aliquet nisi. Aliquam erat volutpat. Maecenas sagittis pulvinar purus, sed porta quam laoreet at.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>External Project</title>
      <link>/project/example-external-project/</link>
      <pubDate>Wed, 27 Apr 2016 00:00:00 +0000</pubDate>
      
      <guid>/project/example-external-project/</guid>
      <description></description>
    </item>
    
    <item>
      <title>Getting started with the Academic framework for Hugo</title>
      <link>/2016/04/20/getting-started-with-the-academic-framework-for-hugo/</link>
      <pubDate>Wed, 20 Apr 2016 00:00:00 +0100</pubDate>
      
      <guid>/2016/04/20/getting-started-with-the-academic-framework-for-hugo/</guid>
      <description>

&lt;p&gt;The Academic framework enables you to easily create a beautifully simple personal or academic website using the &lt;a href=&#34;https://gohugo.io&#34; target=&#34;_blank&#34;&gt;Hugo&lt;/a&gt; static site generator.&lt;/p&gt;

&lt;p&gt;Key features:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Easily manage your homepage, blog posts, publications, talks, and projects&lt;/li&gt;
&lt;li&gt;Configurable widgets available for Biography, Publications, Projects, News/Blog, Talks, and Contact&lt;/li&gt;
&lt;li&gt;Need a different section? Just use the Custom widget!&lt;/li&gt;
&lt;li&gt;Write in &lt;a href=&#34;/2016/04/17/writing-content-with-markdown-latex-and-shortcodes/&#34; target=&#34;_blank&#34;&gt;Markdown&lt;/a&gt; for easy formatting and code highlighting, with &lt;a href=&#34;https://en.wikibooks.org/wiki/LaTeX/Mathematics&#34; target=&#34;_blank&#34;&gt;LaTeX&lt;/a&gt; for mathematical expressions&lt;/li&gt;
&lt;li&gt;Social/academic network linking, &lt;a href=&#34;https://analytics.google.com&#34; target=&#34;_blank&#34;&gt;Google Analytics&lt;/a&gt;, and &lt;a href=&#34;https://disqus.com&#34; target=&#34;_blank&#34;&gt;Disqus&lt;/a&gt; comments&lt;/li&gt;
&lt;li&gt;Responsive and mobile friendly&lt;/li&gt;
&lt;li&gt;Simple and refreshing one page design&lt;/li&gt;
&lt;li&gt;Multilingual and easy to customize&lt;/li&gt;
&lt;/ul&gt;

&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;nav id=&#34;TableOfContents&#34;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#installation&#34;&gt;Installation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#getting-started&#34;&gt;Getting Started&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#core-parameters&#34;&gt;Core parameters&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#introduce-yourself&#34;&gt;Introduce yourself&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#customize-the-homepage&#34;&gt;Customize the homepage&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#add-your-content&#34;&gt;Add your content&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#remove-unused-widgets-and-pages&#34;&gt;Remove unused widgets and pages&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#customization-updating&#34;&gt;Customization &amp;amp; updating&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#advanced-customization&#34;&gt;Advanced customization&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#navigation-menu&#34;&gt;Navigation menu&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#website-icon&#34;&gt;Website icon&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#theme-color-css&#34;&gt;Theme color (CSS)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#analytics&#34;&gt;Analytics&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#third-party-and-local-scripts-js&#34;&gt;Third party and local scripts (JS)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#language-and-translation&#34;&gt;Language and translation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#permalinks&#34;&gt;Permalinks&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#updating&#34;&gt;Updating&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#feedback-contributing&#34;&gt;Feedback &amp;amp; Contributing&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#license&#34;&gt;License&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/nav&gt;


&lt;h2 id=&#34;installation&#34;&gt;Installation&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://georgecushen.com/create-your-website-with-hugo/#installing-hugo&#34; target=&#34;_blank&#34;&gt;Install Hugo&lt;/a&gt; and create a new website by typing the following commands in your &lt;em&gt;Terminal&lt;/em&gt; or &lt;em&gt;Command Prompt&lt;/em&gt; app:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;hugo new site my_website
cd my_website
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Install Academic with &lt;a href=&#34;https://help.github.com/articles/set-up-git/&#34; target=&#34;_blank&#34;&gt;git&lt;/a&gt;:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;git clone https://github.com/gcushen/hugo-academic.git themes/academic
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Or alternatively, &lt;a href=&#34;https://github.com/gcushen/hugo-academic/archive/master.zip&#34; target=&#34;_blank&#34;&gt;download Academic&lt;/a&gt; and extract it into a &lt;code&gt;themes/academic&lt;/code&gt; folder within your Hugo website.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;If you are creating a new website, copy the contents of the &lt;code&gt;exampleSite&lt;/code&gt; folder to your website root folder, overwriting existing files if necessary. The &lt;code&gt;exampleSite&lt;/code&gt; folder contains an example config file and content to help you get started.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;cp -av themes/academic/exampleSite/* .
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Start the Hugo server from your website root folder:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;hugo server --watch
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Now you can go to &lt;a href=&#34;http://localhost:1313&#34; target=&#34;_blank&#34;&gt;localhost:1313&lt;/a&gt; and your new Academic powered website should appear.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Customize your website - refer to the &lt;em&gt;Getting Started&lt;/em&gt; section below&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Build your site by running the &lt;code&gt;hugo&lt;/code&gt; command. Then &lt;a href=&#34;https://georgecushen.com/create-your-website-with-hugo/&#34; target=&#34;_blank&#34;&gt;host it for free using Github Pages&lt;/a&gt;. Or alternatively, copy the generated &lt;code&gt;public/&lt;/code&gt; directory (by FTP, Rsync, etc.) to your production web server (such as your university&amp;rsquo;s hosting service).&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&#34;getting-started&#34;&gt;Getting Started&lt;/h2&gt;

&lt;p&gt;Assuming you created a new website with the example content following the installation steps above, this section explores just a few more steps in order to customize it.&lt;/p&gt;

&lt;h3 id=&#34;core-parameters&#34;&gt;Core parameters&lt;/h3&gt;

&lt;p&gt;The core parameters for the website can be edited in the &lt;code&gt;config.toml&lt;/code&gt; configuration file:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Set &lt;code&gt;baseurl&lt;/code&gt; to your website URL (we recommend &lt;a href=&#34;https://georgecushen.com/create-your-website-with-hugo/&#34; target=&#34;_blank&#34;&gt;GitHub Pages&lt;/a&gt; for free hosting)&lt;/li&gt;
&lt;li&gt;Set &lt;code&gt;title&lt;/code&gt; to your desired website title such as your name&lt;/li&gt;
&lt;li&gt;The example Disqus commenting variable should be cleared (e.g. &lt;code&gt;disqusShortname = &amp;quot;&amp;quot;&lt;/code&gt;) or set to your own &lt;a href=&#34;https://disqus.com/&#34; target=&#34;_blank&#34;&gt;Disqus&lt;/a&gt; shortname to enable commenting&lt;/li&gt;
&lt;li&gt;Edit your details under &lt;code&gt;[params]&lt;/code&gt;; these will be displayed mainly in the homepage &lt;em&gt;about&lt;/em&gt; and &lt;em&gt;contact&lt;/em&gt; widgets (if used). To disable a contact field, simply clear the value to &lt;code&gt;&amp;quot;&amp;quot;&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Place a square cropped portrait photo named &lt;code&gt;portrait.jpg&lt;/code&gt; into the &lt;code&gt;static/img/&lt;/code&gt; folder, overwriting any defaults. Alternatively, you can edit the &lt;code&gt;avatar&lt;/code&gt; filepath to point to a different image name or clear the value to disable the avatar feature.&lt;/li&gt;
&lt;li&gt;To enable LaTeX math for your site, set &lt;code&gt;math = true&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Social/academic networking links are defined as multiples of &lt;code&gt;[[params.social]]&lt;/code&gt;. They can be created or deleted as necessary.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;introduce-yourself&#34;&gt;Introduce yourself&lt;/h3&gt;

&lt;p&gt;Edit your biography in the &lt;em&gt;about&lt;/em&gt; widget &lt;code&gt;content/home/about.md&lt;/code&gt; that you copied across from the &lt;code&gt;themes/academic/exampleSite/&lt;/code&gt; folder. The research interests and qualifications are stored as &lt;code&gt;interests&lt;/code&gt; and &lt;code&gt;education&lt;/code&gt; variables. The academic qualifications are defined as multiples of &lt;code&gt;[[education.courses]]&lt;/code&gt; and can be created or deleted as necessary. It&amp;rsquo;s possible to completely hide the interests and education lists by deleting their respective variables.&lt;/p&gt;

&lt;h3 id=&#34;customize-the-homepage&#34;&gt;Customize the homepage&lt;/h3&gt;

&lt;p&gt;Refer to our guide on using &lt;a href=&#34;/2016/04/19/customizing-the-homepage-with-widgets/&#34; target=&#34;_blank&#34;&gt;widgets&lt;/a&gt; to customize your homepage.&lt;/p&gt;

&lt;h3 id=&#34;add-your-content&#34;&gt;Add your content&lt;/h3&gt;

&lt;p&gt;Refer to our guide on &lt;a href=&#34;/2016/04/18/managing-content/&#34; target=&#34;_blank&#34;&gt;managing content&lt;/a&gt; to create your own publications, blog posts, talks, and projects.&lt;/p&gt;

&lt;h3 id=&#34;remove-unused-widgets-and-pages&#34;&gt;Remove unused widgets and pages&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;/2016/04/18/managing-content/#removing-content&#34; target=&#34;_blank&#34;&gt;How to remove unused widgets and content pages&lt;/a&gt;.&lt;/p&gt;

&lt;h3 id=&#34;customization-updating&#34;&gt;Customization &amp;amp; updating&lt;/h3&gt;

&lt;p&gt;Continue reading below for advanced customization tips and instructions for keeping the framework up-to-date with any improvements that become available.&lt;/p&gt;

&lt;h2 id=&#34;advanced-customization&#34;&gt;Advanced customization&lt;/h2&gt;

&lt;p&gt;It is possible to carry out many customizations without touching any files in &lt;code&gt;themes/academic&lt;/code&gt;, making it easier to update the framework in the future.&lt;/p&gt;

&lt;h3 id=&#34;navigation-menu&#34;&gt;Navigation menu&lt;/h3&gt;

&lt;p&gt;The &lt;code&gt;[[menu.main]]&lt;/code&gt; entries towards the bottom of &lt;code&gt;config.toml&lt;/code&gt; define the navigation links at the top of the website. They can be added or removed as desired.&lt;/p&gt;

&lt;p&gt;To create a dropdown sub-menu, add &lt;code&gt;identifier = &amp;quot;something&amp;quot;&lt;/code&gt; to the parent item and &lt;code&gt;parent = &amp;quot;something&amp;quot;&lt;/code&gt; to the child item.&lt;/p&gt;

&lt;h3 id=&#34;website-icon&#34;&gt;Website icon&lt;/h3&gt;

&lt;p&gt;Save your main icon and mobile icon as square PNG images named &lt;code&gt;icon.png&lt;/code&gt; and &lt;code&gt;apple-touch-icon.png&lt;/code&gt;, respectively. Place them in your root &lt;code&gt;static/img/&lt;/code&gt; folder.&lt;/p&gt;

&lt;h3 id=&#34;theme-color-css&#34;&gt;Theme color (CSS)&lt;/h3&gt;

&lt;p&gt;You can link custom CSS assets (relative to your root &lt;code&gt;static/css&lt;/code&gt;) from your &lt;code&gt;config.toml&lt;/code&gt; using &lt;code&gt;custom_css = [&amp;quot;custom.css&amp;quot;]&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;For example, lets make a green theme. First, define &lt;code&gt;custom_css = [&amp;quot;green.css&amp;quot;]&lt;/code&gt; in &lt;code&gt;config.toml&lt;/code&gt;. Then we can download the example &lt;a href=&#34;https://gist.github.com/gcushen/d5525a4506b9ccf83f2bce592a895495&#34; target=&#34;_blank&#34;&gt;green theme&lt;/a&gt; and save it as &lt;code&gt;static/css/green.css&lt;/code&gt;, relative to your website root (i.e. &lt;strong&gt;not&lt;/strong&gt; in the &lt;code&gt;themes&lt;/code&gt; directory).&lt;/p&gt;

&lt;h3 id=&#34;analytics&#34;&gt;Analytics&lt;/h3&gt;

&lt;p&gt;To enable &lt;a href=&#34;http://www.google.com/analytics&#34; target=&#34;_blank&#34;&gt;Google Analytics&lt;/a&gt;, add your tracking code in &lt;code&gt;config.toml&lt;/code&gt; similarly to &lt;code&gt;googleAnalytics = &amp;quot;UA-12345678-9&amp;quot;&lt;/code&gt;.&lt;/p&gt;

&lt;h3 id=&#34;third-party-and-local-scripts-js&#34;&gt;Third party and local scripts (JS)&lt;/h3&gt;

&lt;p&gt;To add a third party script, create a file named &lt;code&gt;head_custom.html&lt;/code&gt; in a &lt;code&gt;layouts/partials/&lt;/code&gt; folder at the root of your website (not in the &lt;code&gt;themes&lt;/code&gt; folder). Any HTML code added to this file will be included within your website&amp;rsquo;s &lt;code&gt;&amp;lt;head&amp;gt;&lt;/code&gt;. Therefore, it&amp;rsquo;s suitable for adding custom metadata or third party scripts specified with the &lt;em&gt;async&lt;/em&gt; attribute.&lt;/p&gt;

&lt;p&gt;Whereas for your own local scripts, you can link your local JS assets (relative to your root &lt;code&gt;static/js&lt;/code&gt;) from your &lt;code&gt;config.toml&lt;/code&gt; using &lt;code&gt;custom_js  = [&amp;quot;custom.js&amp;quot;]&lt;/code&gt;.&lt;/p&gt;

&lt;h3 id=&#34;language-and-translation&#34;&gt;Language and translation&lt;/h3&gt;

&lt;p&gt;The interface text (e.g. buttons) is stored in language files which are collected from Academic&amp;rsquo;s &lt;code&gt;themes/academic/i18n/&lt;/code&gt; folder, as well as an &lt;code&gt;i18n/&lt;/code&gt; folder at the root of your project.&lt;/p&gt;

&lt;p&gt;To edit the interface text, copy &lt;code&gt;themes/academic/i18n/en.yaml&lt;/code&gt; to &lt;code&gt;i18n/en.yaml&lt;/code&gt; (relative to the root of your website). Open the new file and make any desired changes to the text appearing after &lt;code&gt;translation:&lt;/code&gt;. Note that the language files are formatted in YAML syntax.&lt;/p&gt;

&lt;p&gt;To translate the interface text to another language, follow the above instructions, but name the new file in the form &lt;code&gt;i18n/X.yaml&lt;/code&gt; where &lt;code&gt;X&lt;/code&gt; is the appropriate &lt;a href=&#34;http://www.w3schools.com/tags/ref_language_codes.asp&#34; target=&#34;_blank&#34;&gt;ISO/RFC5646 language identifier&lt;/a&gt; for the translation. Then follow the brief instructions in the &lt;em&gt;Language&lt;/em&gt; section at the bottom of your &lt;code&gt;config.toml&lt;/code&gt;. To change the default language used by Academic, set &lt;code&gt;defaultContentLanguage&lt;/code&gt; to the desired language identifier in your configuration file.&lt;/p&gt;

&lt;p&gt;To translate the navigation bar, you can edit the default &lt;code&gt;[[menu.main]]&lt;/code&gt; instances in &lt;code&gt;config.toml&lt;/code&gt;. However, for a multilingual site, you will need to duplicate all of the &lt;code&gt;[[menu.main]]&lt;/code&gt; instances and rename the new instances from &lt;code&gt;[[menu.main]]&lt;/code&gt; to &lt;code&gt;[[Languages.X.menu.main]]&lt;/code&gt;, where &lt;code&gt;X&lt;/code&gt; is the language identifier (e.g. &lt;code&gt;[[Languages.zh.menu.main]]&lt;/code&gt; for Simplified Chinese). Thus, the navigation bar can be displayed in multiple languages.&lt;/p&gt;

&lt;p&gt;To translate a content file in your &lt;code&gt;content/&lt;/code&gt; folder into another language, copy the file to &lt;code&gt;filename.X.md&lt;/code&gt; where &lt;code&gt;filename&lt;/code&gt; is your existing filename and &lt;code&gt;X&lt;/code&gt; is the appropriate &lt;a href=&#34;http://www.w3schools.com/tags/ref_language_codes.asp&#34; target=&#34;_blank&#34;&gt;ISO/RFC5646 language identifier&lt;/a&gt; for the translation. Then translate the content in the new file to the specified language.&lt;/p&gt;

&lt;p&gt;For further details on Hugo&amp;rsquo;s internationalization and multilingual features, refer to the &lt;a href=&#34;https://gohugo.io/content/multilingual/&#34; target=&#34;_blank&#34;&gt;associated Hugo documentation&lt;/a&gt;.&lt;/p&gt;

&lt;h3 id=&#34;permalinks&#34;&gt;Permalinks&lt;/h3&gt;

&lt;p&gt;&lt;em&gt;Permalinks&lt;/em&gt;, or &lt;em&gt;permanent links&lt;/em&gt;, are URLs to individual pages and posts on your website. They are permanent web addresses which can be used to link to your content. Using Hugo&amp;rsquo;s &lt;em&gt;permalinks&lt;/em&gt; option these can be easily customized. For example, the blog post URL can be changed to the form &lt;em&gt;yourURL/2016/05/01/my-post-slug&lt;/em&gt; by adding the following near the top of your &lt;code&gt;config.toml&lt;/code&gt; (before &lt;code&gt;[params]&lt;/code&gt; settings):&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;[permalinks]
    post = &amp;quot;/:year/:month/:day/:slug&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Where &lt;code&gt;:slug&lt;/code&gt; defaults to the filename of the post, excluding the file extension. However, slug may be overridden on a per post basis if desired, simply by setting &lt;code&gt;slug = &amp;quot;my-short-post-title&amp;quot;&lt;/code&gt; in your post preamble.&lt;/p&gt;

&lt;h2 id=&#34;updating&#34;&gt;Updating&lt;/h2&gt;

&lt;p&gt;Feel free to &lt;em&gt;star&lt;/em&gt; the project on &lt;a href=&#34;https://github.com/gcushen/hugo-academic/&#34; target=&#34;_blank&#34;&gt;Github&lt;/a&gt; to help keep track of updates and check out the &lt;a href=&#34;https://sourcethemes.com/academic/tags/updates&#34; target=&#34;_blank&#34;&gt;release notes&lt;/a&gt; prior to updating your site.&lt;/p&gt;

&lt;p&gt;Before updating the framework, it is recommended to make a backup of your entire website directory, or at least your &lt;code&gt;themes/academic&lt;/code&gt; directory.&lt;/p&gt;

&lt;p&gt;Before updating for the first time, the remote &lt;em&gt;origin&lt;/em&gt; repository should be renamed to &lt;em&gt;upstream&lt;/em&gt;:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ cd themes/academic
$ git remote rename origin upstream
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;To list available updates:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ cd themes/academic
$ git fetch upstream
$ git log --pretty=oneline --abbrev-commit --decorate HEAD..upstream/master
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Then, update by running:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ git pull upstream
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;If you have modified files in &lt;code&gt;themes/academic&lt;/code&gt;, git will attempt to auto-merge changes. If conflicts are reported, you will need to manually edit the files with conflicts and add them back (&lt;code&gt;git add &amp;lt;filename&amp;gt;&lt;/code&gt;).&lt;/p&gt;

&lt;p&gt;If there are any issues after updating, you may wish to compare your site with the latest &lt;a href=&#34;https://github.com/gcushen/hugo-academic/tree/master/exampleSite&#34; target=&#34;_blank&#34;&gt;example site&lt;/a&gt; to check if any settings changed in &lt;code&gt;config.toml&lt;/code&gt; or the &lt;code&gt;+++&lt;/code&gt; frontmatter of content files.&lt;/p&gt;

&lt;h2 id=&#34;feedback-contributing&#34;&gt;Feedback &amp;amp; Contributing&lt;/h2&gt;

&lt;p&gt;Please use the &lt;a href=&#34;https://github.com/gcushen/hugo-academic/issues&#34; target=&#34;_blank&#34;&gt;issue tracker&lt;/a&gt; to let me know about any bugs or feature requests, or alternatively make a pull request.&lt;/p&gt;

&lt;p&gt;For general questions about Hugo, there is a &lt;a href=&#34;http://discuss.gohugo.io&#34; target=&#34;_blank&#34;&gt;Hugo discussion forum&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&#34;license&#34;&gt;License&lt;/h2&gt;

&lt;p&gt;Copyright 2016 &lt;a href=&#34;https://georgecushen.com&#34; target=&#34;_blank&#34;&gt;George Cushen&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Released under the &lt;a href=&#34;https://github.com/gcushen/hugo-academic/blob/master/LICENSE.md&#34; target=&#34;_blank&#34;&gt;MIT&lt;/a&gt; license.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Customizing the homepage with widgets</title>
      <link>/2016/04/19/customizing-the-homepage-with-widgets/</link>
      <pubDate>Tue, 19 Apr 2016 00:00:00 +0100</pubDate>
      
      <guid>/2016/04/19/customizing-the-homepage-with-widgets/</guid>
      <description>

&lt;p&gt;Homepage widgets display as sections on the homepage. They can be enabled/disabled and configured as desired. Academic has the following widgets available to use:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;About/biography&lt;/li&gt;
&lt;li&gt;Selected publications&lt;/li&gt;
&lt;li&gt;Recent publications&lt;/li&gt;
&lt;li&gt;Recent news/blog posts&lt;/li&gt;
&lt;li&gt;Projects&lt;/li&gt;
&lt;li&gt;Selected talks&lt;/li&gt;
&lt;li&gt;Recent talks&lt;/li&gt;
&lt;li&gt;Contact&lt;/li&gt;
&lt;li&gt;Tag cloud&lt;/li&gt;
&lt;li&gt;Custom widget (demonstrated with the &lt;em&gt;teaching&lt;/em&gt; example)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The example site that you copied to create your site uses all the different types of widget (except talks), so you can generally just delete the widgets you don&amp;rsquo;t need and customize the parameters of the widgets you wish to keep.&lt;/p&gt;

&lt;p&gt;The parameters for each widget vary. They can be found in the preamble/frontmatter (between the pair of &lt;code&gt;+++&lt;/code&gt;) for each widget installed in the &lt;code&gt;content/home/&lt;/code&gt; folder.&lt;/p&gt;

&lt;div class=&#34;alert alert-note&#34;&gt;
  &lt;p&gt;By default, publications will be displayed in a simple list. If you prefer a more detailed list with abstract and image, you can enable the detailed publication list on the homepage by setting &lt;code&gt;list_format = 2&lt;/code&gt; in &lt;code&gt;content/home/publications.md&lt;/code&gt;.&lt;/p&gt;

&lt;/div&gt;


&lt;h2 id=&#34;add-a-widget-to-the-homepage&#34;&gt;Add a widget to the homepage&lt;/h2&gt;

&lt;p&gt;To add a widget manually, copy the relevant widget from &lt;code&gt;themes/academic/exampleSite/content/home/&lt;/code&gt; to your &lt;code&gt;content/home/&lt;/code&gt; folder.&lt;/p&gt;

&lt;p&gt;Widget identifiers are set to their respective filenames, so a &lt;code&gt;content/home/about.md&lt;/code&gt; widget can be linked from the navigation bar by setting the relevant URL as &lt;code&gt;&amp;quot;#about&amp;quot;&lt;/code&gt; in &lt;code&gt;config.toml&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;This means that if you want to use multiple instances of a widget, each widget will be assigned a unique ID based on the filename that you set. You can then use that ID for linking, like in the above example.&lt;/p&gt;

&lt;h2 id=&#34;using-the-custom-widget&#34;&gt;Using the custom widget&lt;/h2&gt;

&lt;p&gt;You can use the custom widget to create your own home page sections.&lt;/p&gt;

&lt;p&gt;Simply duplicate (copy/paste) and rename the example &lt;em&gt;teaching&lt;/em&gt; file at &lt;code&gt;content/home/teaching.md&lt;/code&gt;. Then edit the section title, weight (refer to &lt;em&gt;Ordering sections&lt;/em&gt; below), and content as desired.&lt;/p&gt;

&lt;p&gt;You may also wish to add a navigation link to the top of the page that points to the new section. This can be achieved by adding something similar to the following lines to your &lt;code&gt;config.toml&lt;/code&gt;, where the URL will consist of the first title word in lowercase:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;[[menu.main]]
    name = &amp;quot;Research&amp;quot;
    url = &amp;quot;#research&amp;quot;
    weight = 10
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;remove-a-widget-from-the-homepage&#34;&gt;Remove a widget from the homepage&lt;/h2&gt;

&lt;p&gt;If you do not require a particular widget, you can simply delete any associated files from the &lt;code&gt;content/home/&lt;/code&gt; folder.&lt;/p&gt;

&lt;p&gt;To remove a navigation link from the top of the page, remove the associated &lt;code&gt;[[menu.main]]&lt;/code&gt; entry in &lt;code&gt;config.toml&lt;/code&gt;.&lt;/p&gt;

&lt;h2 id=&#34;ordering-widgets&#34;&gt;Ordering widgets&lt;/h2&gt;

&lt;p&gt;The order that the homepage widgets are displayed in is defined by the &lt;code&gt;weight&lt;/code&gt; parameter in each of the files in the &lt;code&gt;content/home/&lt;/code&gt; directory. The widgets are displayed in ascending order of their &lt;code&gt;weight&lt;/code&gt;, so you can simply edit the &lt;code&gt;weight&lt;/code&gt; parameters as desired.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Managing content</title>
      <link>/2016/04/18/managing-content/</link>
      <pubDate>Mon, 18 Apr 2016 00:00:00 +0100</pubDate>
      
      <guid>/2016/04/18/managing-content/</guid>
      <description>&lt;p&gt;This is a brief guide to managing content with the Academic framework. Content can include publications, projects, talks, and news/blog articles. After you have read this guide about creating and managing content, you may also be interested to learn about &lt;a href=&#34;/2016/04/17/writing-content-with-markdown-latex-and-shortcodes/&#34; target=&#34;_blank&#34;&gt;writing content with Markdown, LaTeX, and Shortcodes&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;To enable LaTeX math rendering for a page, you should include &lt;code&gt;math = true&lt;/code&gt; in the page&amp;rsquo;s &lt;code&gt;+++&lt;/code&gt; preamble, as demonstrated in the included example site. Otherwise, to enable math on the homepage or for all pages, you must globally set &lt;code&gt;math = true&lt;/code&gt; in &lt;code&gt;config.toml&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;To disable source code highlighting by default for all pages, set &lt;code&gt;highlight = false&lt;/code&gt; in &lt;code&gt;config.toml&lt;/code&gt;. You can then enable source code highlighting only on pages that need it by setting &lt;code&gt;highlight = true&lt;/code&gt; in that page&amp;rsquo;s preamble. See the &lt;a href=&#34;/2016/04/17/writing-content-with-markdown-latex-and-shortcodes/#code-highlighting&#34; target=&#34;_blank&#34;&gt;code-highlighting docs&lt;/a&gt; for more details.&lt;/p&gt;

&lt;p&gt;To display a featured image in content page headers, the parameters below can be inserted towards the end of a page&amp;rsquo;s &lt;code&gt;+++&lt;/code&gt; preamble. It is assumed that the image is located in your &lt;code&gt;static/img/&lt;/code&gt; folder, so the full path in the example below will be &lt;code&gt;static/img/headers/getting-started.png&lt;/code&gt;. The &lt;code&gt;caption&lt;/code&gt; parameter can be used to write an image caption or credit.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-toml&#34;&gt;[header]
image = &amp;quot;headers/getting-started.png&amp;quot;
caption = &amp;quot;Image credit: [**Academic**](https://github.com/gcushen/hugo-academic/)&amp;quot;

&lt;/code&gt;&lt;/pre&gt;

&lt;div class=&#34;alert alert-note&#34;&gt;
  &lt;p&gt;If you wish to prevent a featured image automatically being used for a post&amp;rsquo;s thumbnail on the homepage, the &lt;code&gt;preview = false&lt;/code&gt; parameter can be added to &lt;code&gt;[header]&lt;/code&gt;.&lt;/p&gt;

&lt;/div&gt;


&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;nav id=&#34;TableOfContents&#34;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#create-a-publication&#34;&gt;Create a publication&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#create-a-blog-post&#34;&gt;Create a blog post&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#create-a-project&#34;&gt;Create a project&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#create-a-talk&#34;&gt;Create a talk&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#create-other-pages-e-g-cv&#34;&gt;Create other pages (e.g. CV)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#manage-node-index-pages&#34;&gt;Manage node index pages&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#removing-content&#34;&gt;Removing content&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#view-your-updated-site&#34;&gt;View your updated site&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#deploy-your-site&#34;&gt;Deploy your site&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/nav&gt;


&lt;h2 id=&#34;create-a-publication&#34;&gt;Create a publication&lt;/h2&gt;

&lt;p&gt;To create a new publication:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;hugo new publication/my-paper-name.md
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Then edit the default variables at the top of &lt;code&gt;content/publication/my-paper-name.md&lt;/code&gt; to include the details of your publication. The &lt;code&gt;url_&lt;/code&gt; variables are used to generate links associated with your publication, such as for viewing PDFs of papers. Here is an example:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;+++
abstract = &amp;quot;An abstract...&amp;quot;
authors = [&amp;quot;First author&#39;s name&amp;quot;, &amp;quot;Second author&#39;s name&amp;quot;]
date = &amp;quot;2013-07-01&amp;quot;
image = &amp;quot;&amp;quot;
image_preview = &amp;quot;&amp;quot;
math = false
publication = &amp;quot;The publishing part of the citation goes here. You may use *Markdown* for italics etc.&amp;quot;
title = &amp;quot;A publication title, such as title of a paper&amp;quot;
url_code = &amp;quot;&amp;quot;
url_dataset = &amp;quot;&amp;quot;
url_pdf = &amp;quot;pdf/my-paper-name.pdf&amp;quot;
url_project = &amp;quot;&amp;quot;
url_slides = &amp;quot;&amp;quot;
url_video = &amp;quot;&amp;quot;
+++

Further details on your publication can be written here using *Markdown* for formatting. This text will be displayed on the Publication Detail page.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The &lt;code&gt;url_&lt;/code&gt; links can either point to local or web content. Associated local publication content, such as PDFs, may be copied to a &lt;code&gt;static/pdf/&lt;/code&gt; folder and referenced like &lt;code&gt;url_pdf = &amp;quot;pdf/my-paper-name.pdf&amp;quot;&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;You can also associate custom link buttons with the publication by adding the following block(s) within the variable preamble above, which is denoted by &lt;code&gt;+++&lt;/code&gt;:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;[[url_custom]]
    name = &amp;quot;Custom Link&amp;quot;
    url = &amp;quot;http://www.example.org&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;If you enabled &lt;code&gt;detailed_list&lt;/code&gt; for publications in &lt;code&gt;config.toml&lt;/code&gt;, then there are a few more optional variables that you can include in the publication page preamble. You may use &lt;code&gt;abstract_short = &amp;quot;friendly summary of abstract&amp;quot;&lt;/code&gt; and &lt;code&gt;publication_short = &amp;quot;abbreviated publication details&amp;quot;&lt;/code&gt; to display a friendly summary of the abstract and abbreviate the publication details, respectively. Furthermore, there is the option to display a different image on the homepage to the publication detail page by setting &lt;code&gt;image_preview = &amp;quot;my-image.jpg&amp;quot;&lt;/code&gt;. This can be useful if you wish to scale down the image for the homepage or simply if you just wish to show a different image for the preview.&lt;/p&gt;

&lt;div class=&#34;alert alert-warning&#34;&gt;
  &lt;p&gt;Any double quotes (&lt;code&gt;&amp;quot;&lt;/code&gt;) or backslashes (e.g. LaTeX &lt;code&gt;\times&lt;/code&gt;) occurring within the value of any frontmatter parameter (such as the &lt;em&gt;abstract&lt;/em&gt;) should be escaped with a backslash (&lt;code&gt;\&lt;/code&gt;). For example, the symbol &lt;code&gt;&amp;quot;&lt;/code&gt; and LaTeX text &lt;code&gt;\times&lt;/code&gt; become &lt;code&gt;\&amp;quot;&lt;/code&gt; and &lt;code&gt;\\times&lt;/code&gt;, respectively. Refer to the &lt;a href=&#34;https://github.com/toml-lang/toml#user-content-string&#34; target=&#34;_blank&#34;&gt;TOML documentation&lt;/a&gt; for more info.&lt;/p&gt;

&lt;/div&gt;


&lt;h2 id=&#34;create-a-blog-post&#34;&gt;Create a blog post&lt;/h2&gt;

&lt;p&gt;To create a blog/news article:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;hugo new post/my-article-name.md
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Then edit the newly created file &lt;code&gt;content/post/my-article-name.md&lt;/code&gt; with your full title and content.&lt;/p&gt;

&lt;p&gt;Hugo will automatically generate summaries of posts that appear on the homepage. If you are dissatisfied with an automated summary, you can either limit the summary length by appropriately placing &lt;code&gt;&amp;#60;&amp;#33;&amp;#45;&amp;#45;more&amp;#45;&amp;#45;&amp;#62;&lt;/code&gt; in the article body, or completely override the automated summary by adding a &lt;code&gt;summary&lt;/code&gt; parameter to the &lt;code&gt;+++&lt;/code&gt; preamble such that:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;summary = &amp;quot;Summary of my post.&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;To disable commenting for a specific post, you can add &lt;code&gt;disable_comments = true&lt;/code&gt; to the post &lt;code&gt;+++&lt;/code&gt; preamble. Or to disable commenting for all posts, you can either set &lt;code&gt;disqusShortname = &amp;quot;&amp;quot;&lt;/code&gt; or &lt;code&gt;disable_comments = true&lt;/code&gt; in &lt;code&gt;config.toml&lt;/code&gt;.&lt;/p&gt;

&lt;h2 id=&#34;create-a-project&#34;&gt;Create a project&lt;/h2&gt;

&lt;p&gt;To create a project:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;hugo new project/my-project-name.md
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Then edit the newly created file &lt;code&gt;content/project/my-project-name.md&lt;/code&gt;. Either you can link the project to an external project website by setting the &lt;code&gt;external_link = &amp;quot;http://external-project.com&amp;quot;&lt;/code&gt; variable at the top of the file, or you can add content (below the final &lt;code&gt;+++&lt;/code&gt;) in order to render a project page on your website.&lt;/p&gt;

&lt;h2 id=&#34;create-a-talk&#34;&gt;Create a talk&lt;/h2&gt;

&lt;p&gt;To create a talk:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;hugo new talk/my-talk-name.md
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Then edit the newly created file &lt;code&gt;content/talk/my-talk-name.md&lt;/code&gt; with your full talk title and details. Note that many of the talk parameters are similar to the publication parameters.&lt;/p&gt;

&lt;h2 id=&#34;create-other-pages-e-g-cv&#34;&gt;Create other pages (e.g. CV)&lt;/h2&gt;

&lt;p&gt;For other types of content, it is possible to create your own custom pages. For example, let&amp;rsquo;s create a &lt;code&gt;cv.md&lt;/code&gt; page for your Curriculum Vitae in your &lt;code&gt;content&lt;/code&gt; folder. Copy across the frontmatter from the top of one of your post files, adapting it as necessary, and editing your Markdown content below. You can then link to your new page by adding the code &lt;code&gt;[My CV]{{&amp;lt; ref &amp;quot;cv.md&amp;quot; &amp;gt;}}&lt;/code&gt; to any of your existing content.&lt;/p&gt;

&lt;p&gt;Alternatively, for the above example, we could use a PDF of your Curriculum Vitae. For this purpose, create a folder called &lt;code&gt;files&lt;/code&gt; within your &lt;code&gt;static&lt;/code&gt; folder and move a PDF file named &lt;code&gt;cv.pdf&lt;/code&gt; to that location, so we have a &lt;code&gt;static/files/cv.pdf&lt;/code&gt; file path. The PDF can then be linked to from any content by using the code: &lt;code&gt;{{% staticref &amp;quot;files/cv.pdf&amp;quot; %}}Download my CV{{% /staticref %}}&lt;/code&gt;.&lt;/p&gt;

&lt;h2 id=&#34;manage-node-index-pages&#34;&gt;Manage node index pages&lt;/h2&gt;

&lt;p&gt;The node index pages (e.g. &lt;code&gt;/post/&lt;/code&gt;) are the special pages which list all of your content. They can exist for blog posts, publications, and talks. The homepage widgets will automatically link to the node index pages when you have more items of content than can be displayed in the widget. Therefore, if you don&amp;rsquo;t have much content, you may not see the automatic links yet - but you can also manually link to them using a normal Markdown formatted link in your content.&lt;/p&gt;

&lt;p&gt;You can edit the title and add your own content, such as an introduction, by creating and editing the following content files for the node indexes:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;hugo new post/_index.md
hugo new publication/_index.md
hugo new talk/_index.md
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Then remove all parameters except for &lt;code&gt;title&lt;/code&gt;, &lt;code&gt;math&lt;/code&gt;, &lt;code&gt;highlight&lt;/code&gt;, and &lt;code&gt;date&lt;/code&gt;. Edit the &lt;code&gt;title&lt;/code&gt; parameter as desired and add any content after the &lt;code&gt;+++&lt;/code&gt; preamble/frontmatter ends. For example, you should have something similar to:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-toml&#34;&gt;+++
title = &amp;quot;List of my posts&amp;quot;
date = &amp;quot;2017-01-01T00:00:00Z&amp;quot;
math = false
highlight = false
+++

Below is an automatically generated list of all my blog posts!

&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;removing-content&#34;&gt;Removing content&lt;/h2&gt;

&lt;p&gt;Generally, to remove content, simply delete the relevant file from your &lt;code&gt;content/post&lt;/code&gt;, &lt;code&gt;content/publication&lt;/code&gt;, &lt;code&gt;content/project&lt;/code&gt;, or &lt;code&gt;content/talk&lt;/code&gt; folder.&lt;/p&gt;

&lt;h2 id=&#34;view-your-updated-site&#34;&gt;View your updated site&lt;/h2&gt;

&lt;p&gt;After you have made changes to your site, you can view it by running the &lt;code&gt;hugo server --watch&lt;/code&gt; command and then opening &lt;a href=&#34;http://localhost:1313&#34; target=&#34;_blank&#34;&gt;localhost:1313&lt;/a&gt; in your web browser.&lt;/p&gt;

&lt;h2 id=&#34;deploy-your-site&#34;&gt;Deploy your site&lt;/h2&gt;

&lt;p&gt;Finally, you can build the static website to a &lt;code&gt;public/&lt;/code&gt; folder ready for deployment using the &lt;code&gt;hugo&lt;/code&gt; command.&lt;/p&gt;

&lt;p&gt;You may then deploy your site by copying the &lt;code&gt;public/&lt;/code&gt; directory (by FTP, SFTP, WebDAV, Rsync, git push, etc.) to your production web server.&lt;/p&gt;

&lt;p&gt;Note that running &lt;code&gt;hugo&lt;/code&gt; does not remove any previously generated files before building. Therefore, it&amp;rsquo;s best practice to delete your &lt;code&gt;public/&lt;/code&gt; directory prior to running &lt;code&gt;hugo&lt;/code&gt; to ensure no old or interim files are deployed to your server.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Writing content with Markdown, LaTeX, and Shortcodes</title>
      <link>/2016/04/17/writing-content-with-markdown-latex-and-shortcodes/</link>
      <pubDate>Sun, 17 Apr 2016 00:00:00 +0100</pubDate>
      
      <guid>/2016/04/17/writing-content-with-markdown-latex-and-shortcodes/</guid>
      <description>&lt;p&gt;Content can be written using &lt;a href=&#34;https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet&#34; target=&#34;_blank&#34;&gt;Markdown&lt;/a&gt;, &lt;a href=&#34;https://en.wikibooks.org/wiki/LaTeX/Mathematics&#34; target=&#34;_blank&#34;&gt;LaTeX math&lt;/a&gt;, and &lt;a href=&#34;http://gohugo.io/extras/shortcodes/&#34; target=&#34;_blank&#34;&gt;Hugo Shortcodes&lt;/a&gt;. Additionally, HTML may be used for advanced formatting. This article gives an overview of the most common formatting options.&lt;/p&gt;

&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;nav id=&#34;TableOfContents&#34;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#sub-headings&#34;&gt;Sub-headings&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#emphasis&#34;&gt;Emphasis&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#ordered-lists&#34;&gt;Ordered lists&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#unordered-lists&#34;&gt;Unordered lists&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#images&#34;&gt;Images&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#links&#34;&gt;Links&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#emojis&#34;&gt;Emojis&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#blockquote&#34;&gt;Blockquote&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#footnotes&#34;&gt;Footnotes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#code-highlighting&#34;&gt;Code highlighting&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#highlighting-options&#34;&gt;Highlighting options&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#option-highlight&#34;&gt;Option &lt;code&gt;highlight&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#option-highlight-languages&#34;&gt;Option &lt;code&gt;highlight_languages&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#option-highlight-style&#34;&gt;Option &lt;code&gt;highlight_style&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#option-highlight-version&#34;&gt;Option &lt;code&gt;highlight_version&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#twitter-tweet&#34;&gt;Twitter tweet&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#youtube&#34;&gt;Youtube&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#vimeo&#34;&gt;Vimeo&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#github-gist&#34;&gt;GitHub gist&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#speaker-deck&#34;&gt;Speaker Deck&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#rm-latex-math&#34;&gt;$\rm \LaTeX$ math&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#table&#34;&gt;Table&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#alerts&#34;&gt;Alerts&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#table-of-contents&#34;&gt;Table of Contents&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/nav&gt;


&lt;h2 id=&#34;sub-headings&#34;&gt;Sub-headings&lt;/h2&gt;

&lt;pre&gt;&lt;code&gt;## Heading 2
### Heading 3
#### Heading 4
##### Heading 5
###### Heading 6
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;emphasis&#34;&gt;Emphasis&lt;/h2&gt;

&lt;pre&gt;&lt;code&gt;Italics with *asterisks* or _underscores_.

Bold with **asterisks** or __underscores__.

Combined emphasis with **asterisks and _underscores_**.

Strikethrough with ~~two tildes~~.
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;ordered-lists&#34;&gt;Ordered lists&lt;/h2&gt;

&lt;pre&gt;&lt;code&gt;1. First item
2. Another item
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;unordered-lists&#34;&gt;Unordered lists&lt;/h2&gt;

&lt;pre&gt;&lt;code&gt;* First item
* Another item
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;images&#34;&gt;Images&lt;/h2&gt;

&lt;p&gt;Images may be added to a page by placing them in your &lt;code&gt;static/img/&lt;/code&gt; folder and referencing them using one of the following two notations:&lt;/p&gt;

&lt;p&gt;A general image:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;![alternative text for search engines](/img/screenshot.png)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;A numbered figure with caption:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;{{&amp;lt; figure src=&amp;quot;/img/screenshot.png&amp;quot; title=&amp;quot;Figure Caption&amp;quot; &amp;gt;}}
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;links&#34;&gt;Links&lt;/h2&gt;

&lt;pre&gt;&lt;code&gt;[I&#39;m a link](https://www.google.com)
[A post]({{&amp;lt; ref &amp;quot;post/hi.md&amp;quot; &amp;gt;}})
[A publication]({{&amp;lt; ref &amp;quot;publication/hi.md&amp;quot; &amp;gt;}})
[A project]({{&amp;lt; ref &amp;quot;project/hi.md&amp;quot; &amp;gt;}})
[Another section]({{&amp;lt; relref &amp;quot;hi.md#who&amp;quot; &amp;gt;}})
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;To enable linking to a file, such as a PDF, first place the file in your &lt;code&gt;static/files/&lt;/code&gt; folder and then link to it using the following form:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;{{% staticref &amp;quot;files/cv.pdf&amp;quot; %}}Download my CV{{% /staticref %}}
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;emojis&#34;&gt;Emojis&lt;/h2&gt;

&lt;p&gt;See the &lt;a href=&#34;http://www.webpagefx.com/tools/emoji-cheat-sheet/&#34; target=&#34;_blank&#34;&gt;Emoji cheat sheet&lt;/a&gt; for available emoticons. The following serves as an example, but you should remove the spaces between each emoji name and pair of semicolons:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;I : heart : Academic : smile :
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;I ❤️ Academic 😄&lt;/p&gt;

&lt;h2 id=&#34;blockquote&#34;&gt;Blockquote&lt;/h2&gt;

&lt;pre&gt;&lt;code&gt;&amp;gt; This is a blockquote.
&lt;/code&gt;&lt;/pre&gt;

&lt;blockquote&gt;
&lt;p&gt;This is a blockquote.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&#34;footnotes&#34;&gt;Footnotes&lt;/h2&gt;

&lt;pre&gt;&lt;code&gt;I have more [^1] to say.

[^1]: Footnote example.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;I have more &lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:1&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:1&#34;&gt;1&lt;/a&gt;&lt;/sup&gt; to say.&lt;/p&gt;

&lt;h2 id=&#34;code-highlighting&#34;&gt;Code highlighting&lt;/h2&gt;

&lt;p&gt;Pass the &lt;em&gt;language&lt;/em&gt; of the code, such as &lt;code&gt;python&lt;/code&gt;, as a parameter after three backticks:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;```python
# Example of code highlighting
input_string_var = input(&amp;quot;Enter some data: &amp;quot;)
print(&amp;quot;You entered: {}&amp;quot;.format(input_string_var))
```
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Result:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;# Example of code highlighting
input_string_var = input(&amp;quot;Enter some data: &amp;quot;)
print(&amp;quot;You entered: {}&amp;quot;.format(input_string_var))
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;highlighting-options&#34;&gt;Highlighting options&lt;/h3&gt;

&lt;p&gt;The Academic theme uses &lt;a href=&#34;https://highlightjs.org&#34; target=&#34;_blank&#34;&gt;highlight.js&lt;/a&gt; for source code highlighting, and highlighting is enabled by default for all pages. However, several configuration options are supported that allow finer-grained control over highlight.js.&lt;/p&gt;

&lt;p&gt;The following table lists the supported options for configuring highlight.js, along with their expected type and a short description. A &amp;ldquo;yes&amp;rdquo; in the &lt;strong&gt;config.toml&lt;/strong&gt; column means the value can be set globally in &lt;code&gt;config.toml&lt;/code&gt;, and a &amp;ldquo;yes&amp;rdquo; in the &lt;strong&gt;preamble&lt;/strong&gt; column means that the value can be set locally in a particular page&amp;rsquo;s preamble.&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;option&lt;/th&gt;
&lt;th&gt;type&lt;/th&gt;
&lt;th&gt;description&lt;/th&gt;
&lt;th&gt;config.toml&lt;/th&gt;
&lt;th&gt;preamble&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;highlight&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;boolean&lt;/td&gt;
&lt;td&gt;enable/disable highlighting&lt;/td&gt;
&lt;td&gt;yes&lt;/td&gt;
&lt;td&gt;yes&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;code&gt;highlight_languages&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;slice&lt;/td&gt;
&lt;td&gt;choose additional languages&lt;/td&gt;
&lt;td&gt;yes&lt;/td&gt;
&lt;td&gt;yes&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;code&gt;highlight_style&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;string&lt;/td&gt;
&lt;td&gt;choose a highlighting style&lt;/td&gt;
&lt;td&gt;yes&lt;/td&gt;
&lt;td&gt;no&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;code&gt;highlight_version&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;string&lt;/td&gt;
&lt;td&gt;choose the highlight.js version&lt;/td&gt;
&lt;td&gt;yes&lt;/td&gt;
&lt;td&gt;no&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h4 id=&#34;option-highlight&#34;&gt;Option &lt;code&gt;highlight&lt;/code&gt;&lt;/h4&gt;

&lt;p&gt;The &lt;code&gt;highlight&lt;/code&gt; option allows enabling or disabling the inclusion of highlight.js, either globally or for a particular page. If the option is unset, it has the same effect as if you had specified &lt;code&gt;highlight = true&lt;/code&gt;. That is, the highlight.js javascript and css files will be included in every page. If you&amp;rsquo;d like to only include highlight.js files on pages that actually require source code highlighting, you can set &lt;code&gt;highlight = false&lt;/code&gt; in &lt;code&gt;config.toml&lt;/code&gt;, and then override it by setting &lt;code&gt;highlight = true&lt;/code&gt; in the preamble of any pages that require source code highlighting. Conversely, you could enable highlighting globally, and disable it locally for pages that do not require it. Here is a table that shows whether highlighting will be enabled for a page, based on the values of &lt;code&gt;highlight&lt;/code&gt; set in &lt;code&gt;config.toml&lt;/code&gt; and/or the page&amp;rsquo;s preamble.&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;config.toml&lt;/th&gt;
&lt;th&gt;page preamble&lt;/th&gt;
&lt;th&gt;highlighting enabled for page?&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;unset or true&lt;/td&gt;
&lt;td&gt;unset or true&lt;/td&gt;
&lt;td&gt;yes&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;unset or true&lt;/td&gt;
&lt;td&gt;false&lt;/td&gt;
&lt;td&gt;no&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;false&lt;/td&gt;
&lt;td&gt;unset or false&lt;/td&gt;
&lt;td&gt;no&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;false&lt;/td&gt;
&lt;td&gt;true&lt;/td&gt;
&lt;td&gt;yes&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h4 id=&#34;option-highlight-languages&#34;&gt;Option &lt;code&gt;highlight_languages&lt;/code&gt;&lt;/h4&gt;

&lt;p&gt;The &lt;code&gt;highlight_languages&lt;/code&gt; option allows you to specify additional languages that are supported by highlight.js, but are not considered &amp;ldquo;common&amp;rdquo; and therefore are not supported by default. For example, if you want source code highlighting for Go and clojure in all pages, set &lt;code&gt;highlight_languages = [&amp;quot;go&amp;quot;, &amp;quot;clojure&amp;quot;]&lt;/code&gt; in &lt;code&gt;config.toml&lt;/code&gt;. If, on the other hand, you want to enable a language only for a specific page, you can set &lt;code&gt;highlight_languages&lt;/code&gt; in that page&amp;rsquo;s preamble.&lt;/p&gt;

&lt;p&gt;The &lt;code&gt;highlight_languages&lt;/code&gt; options specified in &lt;code&gt;config.toml&lt;/code&gt; and in a page&amp;rsquo;s preamble are additive. That is, if &lt;code&gt;config.toml&lt;/code&gt; contains, &lt;code&gt;highlight_languages = [&amp;quot;go&amp;quot;]&lt;/code&gt; and the page&amp;rsquo;s preamble contains &lt;code&gt;highlight_languages = [&amp;quot;ocaml&amp;quot;]&lt;/code&gt;, then javascript files for &lt;em&gt;both&lt;/em&gt; go and ocaml will be included for that page.&lt;/p&gt;

&lt;p&gt;If the &lt;code&gt;highlight_languages&lt;/code&gt; option is set, then the corresponding javascript files will be served from the &lt;a href=&#34;https://cdnjs.com/libraries/highlight.js/&#34; target=&#34;_blank&#34;&gt;cdnjs server&lt;/a&gt;. To see a list of available languages, visit the &lt;a href=&#34;https://cdnjs.com/libraries/highlight.js/&#34; target=&#34;_blank&#34;&gt;cdnjs page&lt;/a&gt; and search for links with the word &amp;ldquo;languages&amp;rdquo;.&lt;/p&gt;

&lt;p&gt;The &lt;code&gt;highlight_languages&lt;/code&gt; option provides an easy and convenient way to include support for additional languages to be severed from a CDN. If serving unmodified files from cdnjs doesn&amp;rsquo;t meet your needs, you can include javascript files for additional language support via one of the methods described in the &lt;a href=&#34;/2016/04/20/getting-started-with-the-academic-framework-for-hugo/#third-party-and-local-scripts-js&#34; target=&#34;_blank&#34;&gt;getting started guide&lt;/a&gt;.&lt;/p&gt;

&lt;h4 id=&#34;option-highlight-style&#34;&gt;Option &lt;code&gt;highlight_style&lt;/code&gt;&lt;/h4&gt;

&lt;p&gt;The &lt;code&gt;highlight_style&lt;/code&gt; option allows you to select an alternate css style for highlighted code. For example, if you wanted to use the solarized-dark style, you could set &lt;code&gt;highlight_style = &amp;quot;solarized-dark&amp;quot;&lt;/code&gt; in &lt;code&gt;config.toml&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;If the &lt;code&gt;highlight_style&lt;/code&gt; option is unset, the default is to use the file &lt;code&gt;/css/highlight.min.css&lt;/code&gt;, either the one provided by the Academic theme, or else the one in your local &lt;code&gt;static&lt;/code&gt; directory.  The &lt;code&gt;/css/highlight.min.css&lt;/code&gt; file provided by Academic is equivalent to the &lt;code&gt;github&lt;/code&gt; style from highlight.js.&lt;/p&gt;

&lt;p&gt;If the &lt;code&gt;highlight_style&lt;/code&gt; option &lt;em&gt;is&lt;/em&gt; set, then &lt;code&gt;/css/highlight.min.css&lt;/code&gt; is ignored, and the corresponding css file will be served from the &lt;a href=&#34;https://cdnjs.com/libraries/highlight.js/&#34; target=&#34;_blank&#34;&gt;cdnjs server&lt;/a&gt;. To see a list of available styles, visit the &lt;a href=&#34;https://cdnjs.com/libraries/highlight.js/&#34; target=&#34;_blank&#34;&gt;cdnjs page&lt;/a&gt; and search for links with the word &amp;ldquo;styles&amp;rdquo;.&lt;/p&gt;

&lt;p&gt;See the &lt;a href=&#34;https://highlightjs.org/static/demo/&#34; target=&#34;_blank&#34;&gt;highlight.js demo page&lt;/a&gt; for examples of available styles.&lt;/p&gt;

&lt;div class=&#34;alert alert-note&#34;&gt;
  &lt;p&gt;Not all styles listed on the &lt;a href=&#34;https://highlightjs.org/static/demo/&#34; target=&#34;_blank&#34;&gt;highlight.js demo page&lt;/a&gt; are available from the &lt;a href=&#34;https://cdnjs.com/libraries/highlight.js/&#34; target=&#34;_blank&#34;&gt;cdnjs server&lt;/a&gt;. If you want to use a style that is not served by cdnjs, just leave &lt;code&gt;highlight_style&lt;/code&gt; unset, and place the corresponding css file in &lt;code&gt;/static/css/highlight.min.css&lt;/code&gt;.&lt;/p&gt;

&lt;/div&gt;


&lt;div class=&#34;alert alert-note&#34;&gt;
  &lt;p&gt;If you don&amp;rsquo;t want to change the default style that ships with Academic but you do want the style file served from the &lt;a href=&#34;https://cdnjs.com/libraries/highlight.js/&#34; target=&#34;_blank&#34;&gt;cdnjs server&lt;/a&gt;, set &lt;code&gt;highlight_style = &amp;quot;github&amp;quot;&lt;/code&gt; in &lt;code&gt;config.toml&lt;/code&gt;.&lt;/p&gt;

&lt;/div&gt;


&lt;p&gt;The &lt;code&gt;highlight_style&lt;/code&gt; option is only recognized when set in &lt;code&gt;config.toml&lt;/code&gt;. Setting &lt;code&gt;highlight_style&lt;/code&gt; in your page&amp;rsquo;s preamble has no effect.&lt;/p&gt;

&lt;h4 id=&#34;option-highlight-version&#34;&gt;Option &lt;code&gt;highlight_version&lt;/code&gt;&lt;/h4&gt;

&lt;p&gt;The &lt;code&gt;highlight_version&lt;/code&gt; option, as the name implies, allows you to select the version of highlight.js you want to use. The default value is &amp;ldquo;9.9.0&amp;rdquo;. The &lt;code&gt;highlight_version&lt;/code&gt; option is only recognized when set in &lt;code&gt;config.toml&lt;/code&gt;. Setting &lt;code&gt;highlight_version&lt;/code&gt; in your page&amp;rsquo;s preamble has no effect.&lt;/p&gt;

&lt;h2 id=&#34;twitter-tweet&#34;&gt;Twitter tweet&lt;/h2&gt;

&lt;p&gt;To include a single tweet, pass the tweet’s ID from the tweet&amp;rsquo;s URL as parameter to the shortcode:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;{{&amp;lt; tweet 666616452582129664 &amp;gt;}}
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;youtube&#34;&gt;Youtube&lt;/h2&gt;

&lt;pre&gt;&lt;code&gt;{{&amp;lt; youtube w7Ft2ymGmfc &amp;gt;}}
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;vimeo&#34;&gt;Vimeo&lt;/h2&gt;

&lt;pre&gt;&lt;code&gt;{{&amp;lt; vimeo 146022717 &amp;gt;}}
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;github-gist&#34;&gt;GitHub gist&lt;/h2&gt;

&lt;pre&gt;&lt;code&gt;{{&amp;lt; gist USERNAME GIST-ID  &amp;gt;}}
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;speaker-deck&#34;&gt;Speaker Deck&lt;/h2&gt;

&lt;pre&gt;&lt;code&gt;{{&amp;lt; speakerdeck 4e8126e72d853c0060001f97 &amp;gt;}}
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;rm-latex-math&#34;&gt;$\rm \LaTeX$ math&lt;/h2&gt;

&lt;pre&gt;&lt;code class=&#34;language-TeX&#34;&gt;$$\left [ – \frac{\hbar^2}{2 m} \frac{\partial^2}{\partial x^2} + V \right ] \Psi = i \hbar \frac{\partial}{\partial t} \Psi$$
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;$$\left [ – \frac{\hbar^2}{2 m} \frac{\partial^2}{\partial x^2} + V \right ] \Psi = i \hbar \frac{\partial}{\partial t} \Psi$$&lt;/p&gt;

&lt;p&gt;Alternatively, inline math can be written by wrapping the formula with only a single &lt;code&gt;$&lt;/code&gt;:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;This is inline: $\mathbf{y} = \mathbf{X}\boldsymbol\beta + \boldsymbol\varepsilon$
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This is inline: $\mathbf{y} = \mathbf{X}\boldsymbol\beta + \boldsymbol\varepsilon$&lt;/p&gt;

&lt;h2 id=&#34;table&#34;&gt;Table&lt;/h2&gt;

&lt;p&gt;Code:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-Markdown&#34;&gt;| Command           | Description                    |
| ------------------| ------------------------------ |
| `hugo`            | Build your website.            |
| `hugo serve -w`   | View your website.             |
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Result:&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Command&lt;/th&gt;
&lt;th&gt;Description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;hugo&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Build your website.&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;code&gt;hugo serve -w&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;View your website.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&#34;alerts&#34;&gt;Alerts&lt;/h2&gt;

&lt;p&gt;Alerts are a useful feature that add side content such as tips, notes, or warnings to your articles. They are especially handy when writing educational tutorial-style articles. Use the corresponding shortcodes to enable alerts inside your content:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;{{% alert note %}}
Here&#39;s a tip or note...
{{% /alert %}}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This will display the following &lt;em&gt;note&lt;/em&gt; block:&lt;/p&gt;

&lt;div class=&#34;alert alert-note&#34;&gt;
  &lt;p&gt;Here&amp;rsquo;s a tip or note&amp;hellip;&lt;/p&gt;

&lt;/div&gt;


&lt;pre&gt;&lt;code&gt;{{% alert warning %}}
Here&#39;s some important information...
{{% /alert %}}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This will display the following &lt;em&gt;warning&lt;/em&gt; block:&lt;/p&gt;

&lt;div class=&#34;alert alert-warning&#34;&gt;
  &lt;p&gt;Here&amp;rsquo;s some important information&amp;hellip;&lt;/p&gt;

&lt;/div&gt;


&lt;h2 id=&#34;table-of-contents&#34;&gt;Table of Contents&lt;/h2&gt;

&lt;p&gt;A table of contents may be particularly useful for long posts or tutorial/documentation type content. Use the &lt;code&gt;{{% toc %}}&lt;/code&gt; shortcode anywhere you wish within your Markdown content to automatically generate a table of contents.&lt;/p&gt;
&lt;div class=&#34;footnotes&#34;&gt;

&lt;hr /&gt;

&lt;ol&gt;
&lt;li id=&#34;fn:1&#34;&gt;Footnote example.
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:1&#34;&gt;&lt;sup&gt;^&lt;/sup&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description>
    </item>
    
    <item>
      <title>A Person Re-Identification System For Mobile Devices</title>
      <link>/publication/person-re-identification/</link>
      <pubDate>Tue, 01 Sep 2015 00:00:00 +0000</pubDate>
      
      <guid>/publication/person-re-identification/</guid>
      <description>&lt;p&gt;More detail can easily be written here using &lt;em&gt;Markdown&lt;/em&gt; and $\rm \LaTeX$ math code.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Mobile visual clothing search</title>
      <link>/publication/clothing-search/</link>
      <pubDate>Mon, 01 Jul 2013 00:00:00 +0000</pubDate>
      
      <guid>/publication/clothing-search/</guid>
      <description>&lt;p&gt;More detail can easily be written here using &lt;em&gt;Markdown&lt;/em&gt; and $\rm \LaTeX$ math code.&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>

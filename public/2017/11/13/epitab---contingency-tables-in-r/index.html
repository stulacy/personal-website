<!DOCTYPE html>
<html lang="en-uk">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="theme" content="hugo-academic">
  <meta name="generator" content="Hugo 0.31.1" />
  <meta name="author" content="Stuart Lacy">
  <meta name="description" content="Research Fellow">

  
  <link rel="alternate" hreflang="en-uk" href="/2017/11/13/epitab---contingency-tables-in-r/">

  
  


  

  
  
  
  
    
  
  
    
    
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
    
  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha512-6MXa8B6uaO18Hid6blRMetEIoPqHf7Ux1tnyIQdpt9qI5OACx7C+O3IVTr98vwGnlcg0LOLa02i9Y1HpVhlfiw==" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.1/css/academicons.min.css" integrity="sha512-NThgw3XKQ1absAahW6to7Ey42uycrVvfNfyjqcFNgCmOCQ5AR4AO0SiXrN+8ZtYeappp56lk1WtvjVmEa+VR6A==" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha512-SfTiTlX6kk+qitfevl/7LibUOeJWlt9rbyDn92a1DqWOw9vWG2MFoays0sgObmWazO5BQPiFucnnEAjpAB+/Sw==" crossorigin="anonymous">
  
  
  
  
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:400,700%7cMerriweather%7cRoboto&#43;Mono">
  
  <link rel="stylesheet" href="/styles.css">
  

  
    <script>
      window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
      ga('create', 'UA-110705129-1', 'auto');
      ga('require', 'eventTracker');
      ga('require', 'outboundLinkTracker');
      ga('require', 'urlChangeTracker');
      ga('send', 'pageview');
    </script>
    <script async src="//www.google-analytics.com/analytics.js"></script>
    
    <script async src="https://cdnjs.cloudflare.com/ajax/libs/autotrack/2.4.1/autotrack.js" integrity="sha512-HUmooslVKj4m6OBu0OgzjXXr+QuFYy/k7eLI5jdeEy/F4RSgMn6XRWRGkFi5IFaFgy7uFTkegp3Z0XnJf3Jq+g==" crossorigin="anonymous"></script>
    
  

  

  <link rel="manifest" href="/site.webmanifest">
  <link rel="icon" type="image/png" href="/img/icon.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/icon-192.png">

  <link rel="canonical" href="/2017/11/13/epitab---contingency-tables-in-r/">

  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="twitter:site" content="@stulacy">
  <meta property="twitter:creator" content="@stulacy">
  
  <meta property="og:site_name" content="Stuart Lacy">
  <meta property="og:url" content="/2017/11/13/epitab---contingency-tables-in-r/">
  <meta property="og:title" content="epitab - Contingency Tables in R | Stuart Lacy">
  <meta property="og:description" content="">
  <meta property="og:locale" content="en-uk">
  
  <meta property="article:published_time" content="2017-11-13T00:00:00&#43;01:00">
  
  <meta property="article:modified_time" content="2017-11-13T00:00:00&#43;01:00">
  

  

  <title>epitab - Contingency Tables in R | Stuart Lacy</title>

</head>
<body id="top" data-spy="scroll" data-target="#toc" data-offset="71" >

<nav class="navbar navbar-default navbar-fixed-top" id="navbar-main">
  <div class="container">

    
    <div class="navbar-header">
      
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
              data-target=".navbar-collapse" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
      <a class="navbar-brand" href="/">Stuart Lacy</a>
    </div>

    
    <div class="collapse navbar-collapse">

      
      
      <ul class="nav navbar-nav navbar-right">
        

        

        
          
        

        <li class="nav-item">
          <a href="/#about">
            
            <span>Home</span>
            
          </a>
        </li>

        
        

        

        
          
        

        <li class="nav-item">
          <a href="/post">
            
            <span>Blog</span>
            
          </a>
        </li>

        
        

        

        
          
        

        <li class="nav-item">
          <a href="/publication">
            
            <span>Publications</span>
            
          </a>
        </li>

        
        

        

        
          
        

        <li class="nav-item">
          <a href="/#projects">
            
            <span>Projects</span>
            
          </a>
        </li>

        
        

        

        
          
        

        <li class="nav-item">
          <a href="/#contact">
            
            <span>Contact</span>
            
          </a>
        </li>

        
        
      

      
      </ul>

    </div>
  </div>
</nav>


<article class="article" itemscope itemtype="http://schema.org/Article">

  


  <div class="article-container">
    <div class="article-inner">
      <h1 itemprop="name">epitab - Contingency Tables in R</h1>

      

<div class="article-metadata">

  <span class="article-date">
    
    <time datetime="2017-11-13 00:00:00 &#43;0100 CET" itemprop="datePublished">
      Nov 13, 2017
    </time>
  </span>

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    7 min read
  </span>
  

  
  
  <span class="middot-divider"></span>
  <a href="/2017/11/13/epitab---contingency-tables-in-r/#disqus_thread"></a>
  

  

  
  

  

</div>


      <div class="article-style" itemprop="articleBody">
        

<p>I&rsquo;ve just released a <a href="https://cran.r-project.org/web/packages/epitab/index.html" target="_blank">new package onto
CRAN</a> and
while it doesn&rsquo;t perform any complex calculations or fit a statistical
niche, it may be one of the most useful everyday libraries I&rsquo;ll write.
In short, <code>epitab</code> provides a framework for building descriptive tables
by extending contingency tables with additional functionality.</p>

<p>I initially developed it for my work in epidemiology, as I kept coming
across situations where I wanted to programmatically generate tables
containing various descriptive statistics to facilitate <em>reproducible
research</em>, but I could not find any existing software that met my
requirements. I tried <code>Epi::stats.table</code>, but found it limited by not
being able to display multiple independent variables; adding a third
variable builds a 3-way table instead. It also lacks the ability to
calculate statistics that aren&rsquo;t from a cross-tabulated combination of
covariate and outcome. My final requirement was that I wanted a way of
tidying the table for publication in various formats.</p>

<p>This post will provide a brief introduction to <code>epitab</code> and detail how
to use its basic functionality. For further guidance see the
<a href="https://cran.r-project.org/web/packages/epitab/vignettes/user_guide.html" target="_blank">vignette</a>,
or the <a href="https://cran.r-project.org/web/packages/epitab/epitab.pdf" target="_blank">reference
manual</a>.</p>

<h2 id="installation">Installation</h2>

<p>The current version (0.2.1 as of the time of writing) is hosted on CRAN
and can easily be installed in the usual manner.</p>

<pre><code>install.packages(&quot;epitab&quot;)
</code></pre>

<p>Development is managed on <a href="https://github.com/stulacy/epitab" target="_blank">Github</a>,
and so the latest release can be installed with <code>devtools</code>.</p>

<pre><code>devtools::install_github(&quot;stulacy/epitab&quot;)
</code></pre>

<h2 id="basic-usage">Basic usage</h2>

<p>The <code>mtcars</code> data set will be used to demonstrate the types of tables
that can be built with <code>epitab</code>. Note that discrete variables are
coerced into factors to simplify subsequent analysis; in epidemiology it
is even common to discretise continuous variables.</p>

<pre><code>library(epitab)
library(dplyr)
library(knitr)
facs &lt;- c('cyl', 'am', 'gear', 'carb', 'vs')
mtcars[facs] &lt;- lapply(mtcars[facs], factor)
head(mtcars) %&gt;%
    kable()
</code></pre>

<table>
<thead>
<tr class="header">
<th></th>
<th align="right">mpg</th>
<th align="left">cyl</th>
<th align="right">disp</th>
<th align="right">hp</th>
<th align="right">drat</th>
<th align="right">wt</th>
<th align="right">qsec</th>
<th align="left">vs</th>
<th align="left">am</th>
<th align="left">gear</th>
<th align="left">carb</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Mazda RX4</td>
<td align="right">21.0</td>
<td align="left">6</td>
<td align="right">160</td>
<td align="right">110</td>
<td align="right">3.90</td>
<td align="right">2.620</td>
<td align="right">16.46</td>
<td align="left">0</td>
<td align="left">1</td>
<td align="left">4</td>
<td align="left">4</td>
</tr>
<tr class="even">
<td>Mazda RX4 Wag</td>
<td align="right">21.0</td>
<td align="left">6</td>
<td align="right">160</td>
<td align="right">110</td>
<td align="right">3.90</td>
<td align="right">2.875</td>
<td align="right">17.02</td>
<td align="left">0</td>
<td align="left">1</td>
<td align="left">4</td>
<td align="left">4</td>
</tr>
<tr class="odd">
<td>Datsun 710</td>
<td align="right">22.8</td>
<td align="left">4</td>
<td align="right">108</td>
<td align="right">93</td>
<td align="right">3.85</td>
<td align="right">2.320</td>
<td align="right">18.61</td>
<td align="left">1</td>
<td align="left">1</td>
<td align="left">4</td>
<td align="left">1</td>
</tr>
<tr class="even">
<td>Hornet 4 Drive</td>
<td align="right">21.4</td>
<td align="left">6</td>
<td align="right">258</td>
<td align="right">110</td>
<td align="right">3.08</td>
<td align="right">3.215</td>
<td align="right">19.44</td>
<td align="left">1</td>
<td align="left">0</td>
<td align="left">3</td>
<td align="left">1</td>
</tr>
<tr class="odd">
<td>Hornet Sportabout</td>
<td align="right">18.7</td>
<td align="left">8</td>
<td align="right">360</td>
<td align="right">175</td>
<td align="right">3.15</td>
<td align="right">3.440</td>
<td align="right">17.02</td>
<td align="left">0</td>
<td align="left">0</td>
<td align="left">3</td>
<td align="left">2</td>
</tr>
<tr class="even">
<td>Valiant</td>
<td align="right">18.1</td>
<td align="left">6</td>
<td align="right">225</td>
<td align="right">105</td>
<td align="right">2.76</td>
<td align="right">3.460</td>
<td align="right">20.22</td>
<td align="left">1</td>
<td align="left">0</td>
<td align="left">3</td>
<td align="left">1</td>
</tr>
</tbody>
</table>

<p>A standard contingency table built with <code>epitab</code> is displayed below. The
covariates (displayed on the table rows) are defined in argument
<code>independents</code>; <code>outcomes</code> specifies the outcome variables (columns).
These are both provided in the form of named lists, with the names
giving the column/row labels. The <code>crosstab_funcs</code> argument defines
statistics to calculate for each covariate/outcome combination; in this
example the <code>freq</code> function (provided in <code>epitab</code>) calculates the
frequency.</p>

<pre><code>contingency_table(independents=list(&quot;Cylinders&quot;=&quot;cyl&quot;, &quot;Num gears&quot;=&quot;gear&quot;),
                  outcomes=list(&quot;Manual transmission&quot;=&quot;am&quot;),
                  data=mtcars,
                  crosstab_funcs = list(freq()))
</code></pre>

<pre><code>    ##               |          |        |Manual transmission     |            |
    ##               |          |All     |0                       |1           |
    ## -------------------------------------------------------------------------
    ##               |          |        |                        |            |
    ##               |Total     |32      |19 (59)                 |13 (41)     |
    ##               |          |        |                        |            |
    ## Cylinders     |4         |11      |3 (27)                  |8 (73)      |
    ##               |6         |7       |4 (57)                  |3 (43)      |
    ##               |8         |14      |12 (86)                 |2 (14)      |
    ##               |          |        |                        |            |
    ## Num gears     |3         |15      |15 (100)                |0 (0)       |
    ##               |4         |12      |4 (33)                  |8 (67)      |
    ##               |5         |5       |0 (0)                   |5 (100)     |
</code></pre>

<p>The above table is suitable for use in an interactive R console,
however, if the table is to be shared with others then a clean, easily
exportable version is required. The function <code>neat_table</code> produces a
<code>knitr::kable</code> object that can be exported to either HTML or LaTeX. This
allows for the generation of descriptive tables alongside the analysis
in RMarkdown, thereby facilitating reproducible research.</p>

<pre><code>contingency_table(independents=list(&quot;Cylinders&quot;=&quot;cyl&quot;, &quot;Num gears&quot;=&quot;gear&quot;),
                  outcomes=list(&quot;Manual transmission&quot;=&quot;am&quot;),
                  data=mtcars,
                  crosstab_funcs = list(freq())) %&gt;%
    neat_table() %&gt;%
    kableExtra::kable_styling(bootstrap_options = c('striped', 'hover'),
                              full_width=FALSE)
</code></pre>

<p><table class="table table table-striped table-hover" style="margin-left: auto; margin-right: auto; width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="border-bottom:hidden" colspan="1">
</th>
<th style="border-bottom:hidden" colspan="1">
</th>
<th style="text-align:center; border-bottom:hidden; padding-bottom:0; padding-left:3px;padding-right:3px;" colspan="2">
Manual transmission</p>

<p></th>
</tr>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
All
</th>
<th style="text-align:left;">
0
</th>
<th style="text-align:left;">
1
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Total
</td>
<td style="text-align:left;">
32
</td>
<td style="text-align:left;">
19 (59)
</td>
<td style="text-align:left;">
13 (41)
</td>
</tr>
<tr grouplength="3">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>Cylinders</strong>
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
4
</td>
<td style="text-align:left;">
11
</td>
<td style="text-align:left;">
3 (27)
</td>
<td style="text-align:left;">
8 (73)
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
6
</td>
<td style="text-align:left;">
7
</td>
<td style="text-align:left;">
4 (57)
</td>
<td style="text-align:left;">
3 (43)
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
8
</td>
<td style="text-align:left;">
14
</td>
<td style="text-align:left;">
12 (86)
</td>
<td style="text-align:left;">
2 (14)
</td>
</tr>
<tr grouplength="3">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>Num gears</strong>
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
3
</td>
<td style="text-align:left;">
15
</td>
<td style="text-align:left;">
15 (100)
</td>
<td style="text-align:left;">
0 (0)
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
4
</td>
<td style="text-align:left;">
12
</td>
<td style="text-align:left;">
4 (33)
</td>
<td style="text-align:left;">
8 (67)
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
5
</td>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
0 (0)
</td>
<td style="text-align:left;">
5 (100)
</td>
</tr>
</tbody>
</table>
Note that multiple outcomes can be passed into <code>contingency_table</code>.</p>

<pre><code>contingency_table(independents=list(&quot;Carburetors&quot;=&quot;carb&quot;, &quot;Num gears&quot;=&quot;gear&quot;),
                  outcomes=list(&quot;Manual transmission&quot;=&quot;am&quot;, &quot;Cylinders&quot;=&quot;cyl&quot;),
                  data=mtcars,
                  crosstab_funcs = list(freq())) %&gt;%
    neat_table() %&gt;%
    kableExtra::kable_styling(bootstrap_options = c('striped', 'hover'),
                              full_width=FALSE)
</code></pre>

<p><table class="table table table-striped table-hover" style="margin-left: auto; margin-right: auto; width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="border-bottom:hidden" colspan="1">
</th>
<th style="border-bottom:hidden" colspan="1">
</th>
<th style="text-align:center; border-bottom:hidden; padding-bottom:0; padding-left:3px;padding-right:3px;" colspan="2">
Manual transmission</p>

<p></th>
<th style="text-align:center; border-bottom:hidden; padding-bottom:0; padding-left:3px;padding-right:3px;" colspan="3">
Cylinders</p>

<p></th>
</tr>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
All
</th>
<th style="text-align:left;">
0
</th>
<th style="text-align:left;">
1
</th>
<th style="text-align:left;">
4
</th>
<th style="text-align:left;">
6
</th>
<th style="text-align:left;">
8
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Total
</td>
<td style="text-align:left;">
32
</td>
<td style="text-align:left;">
19 (59)
</td>
<td style="text-align:left;">
13 (41)
</td>
<td style="text-align:left;">
11 (34)
</td>
<td style="text-align:left;">
7 (22)
</td>
<td style="text-align:left;">
14 (44)
</td>
</tr>
<tr grouplength="6">
<td colspan="7" style="border-bottom: 1px solid;">
<strong>Carburetors</strong>
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
1
</td>
<td style="text-align:left;">
7
</td>
<td style="text-align:left;">
3 (43)
</td>
<td style="text-align:left;">
4 (57)
</td>
<td style="text-align:left;">
5 (71)
</td>
<td style="text-align:left;">
2 (29)
</td>
<td style="text-align:left;">
0 (0)
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
2
</td>
<td style="text-align:left;">
10
</td>
<td style="text-align:left;">
6 (60)
</td>
<td style="text-align:left;">
4 (40)
</td>
<td style="text-align:left;">
6 (60)
</td>
<td style="text-align:left;">
0 (0)
</td>
<td style="text-align:left;">
4 (40)
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
3
</td>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
3 (100)
</td>
<td style="text-align:left;">
0 (0)
</td>
<td style="text-align:left;">
0 (0)
</td>
<td style="text-align:left;">
0 (0)
</td>
<td style="text-align:left;">
3 (100)
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
4
</td>
<td style="text-align:left;">
10
</td>
<td style="text-align:left;">
7 (70)
</td>
<td style="text-align:left;">
3 (30)
</td>
<td style="text-align:left;">
0 (0)
</td>
<td style="text-align:left;">
4 (40)
</td>
<td style="text-align:left;">
6 (60)
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
6
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
0 (0)
</td>
<td style="text-align:left;">
1 (100)
</td>
<td style="text-align:left;">
0 (0)
</td>
<td style="text-align:left;">
1 (100)
</td>
<td style="text-align:left;">
0 (0)
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
8
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
0 (0)
</td>
<td style="text-align:left;">
1 (100)
</td>
<td style="text-align:left;">
0 (0)
</td>
<td style="text-align:left;">
0 (0)
</td>
<td style="text-align:left;">
1 (100)
</td>
</tr>
<tr grouplength="3">
<td colspan="7" style="border-bottom: 1px solid;">
<strong>Num gears</strong>
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
3
</td>
<td style="text-align:left;">
15
</td>
<td style="text-align:left;">
15 (100)
</td>
<td style="text-align:left;">
0 (0)
</td>
<td style="text-align:left;">
1 (7)
</td>
<td style="text-align:left;">
2 (13)
</td>
<td style="text-align:left;">
12 (80)
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
4
</td>
<td style="text-align:left;">
12
</td>
<td style="text-align:left;">
4 (33)
</td>
<td style="text-align:left;">
8 (67)
</td>
<td style="text-align:left;">
8 (67)
</td>
<td style="text-align:left;">
4 (33)
</td>
<td style="text-align:left;">
0 (0)
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
5
</td>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
0 (0)
</td>
<td style="text-align:left;">
5 (100)
</td>
<td style="text-align:left;">
2 (40)
</td>
<td style="text-align:left;">
1 (20)
</td>
<td style="text-align:left;">
2 (40)
</td>
</tr>
</tbody>
</table></p>

<h2 id="other-summary-statistics">Other summary statistics</h2>

<p>Alongside the cross-tabulated frequencies, summary statistics that are
dependent on only the covariates or the outcomes can be displayed.
<em>Column-wise functions</em> are those that act on every outcome column,
independently from the covariates. This behaviour is useful for
identifying a relationship between a continuous independent variable and
the outcome(s). Two column-wise functions are supplied with <code>epitab</code>:
<code>summary_mean</code> and <code>summary_median</code>, which calculate the mean and median
values of a specified covariate for each outcome level. The table below
shows that in this data set, manual cars have less power but greater
fuel economy than automatics.</p>

<pre><code>contingency_table(independents=list(&quot;Cylinders&quot;=&quot;cyl&quot;, &quot;Num gears&quot;=&quot;gear&quot;),
                  outcomes=list(&quot;Manual transmission&quot;=&quot;am&quot;),
                  data=mtcars,
                  crosstab_funcs = list(freq()),
                  col_funcs=list(&quot;Mean MPG&quot;=summary_mean(&quot;mpg&quot;),
                                 &quot;Mean horsepower&quot;=summary_mean(&quot;hp&quot;))) %&gt;%
    neat_table() %&gt;%
    kableExtra::kable_styling(bootstrap_options = c('striped', 'hover'),
                              full_width=FALSE)
</code></pre>

<p><table class="table table table-striped table-hover" style="margin-left: auto; margin-right: auto; width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="border-bottom:hidden" colspan="1">
</th>
<th style="border-bottom:hidden" colspan="1">
</th>
<th style="text-align:center; border-bottom:hidden; padding-bottom:0; padding-left:3px;padding-right:3px;" colspan="2">
Manual transmission</p>

<p></th>
</tr>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
All
</th>
<th style="text-align:left;">
0
</th>
<th style="text-align:left;">
1
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Total
</td>
<td style="text-align:left;">
32
</td>
<td style="text-align:left;">
19 (59)
</td>
<td style="text-align:left;">
13 (41)
</td>
</tr>
<tr grouplength="3">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>Cylinders</strong>
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
4
</td>
<td style="text-align:left;">
11
</td>
<td style="text-align:left;">
3 (27)
</td>
<td style="text-align:left;">
8 (73)
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
6
</td>
<td style="text-align:left;">
7
</td>
<td style="text-align:left;">
4 (57)
</td>
<td style="text-align:left;">
3 (43)
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
8
</td>
<td style="text-align:left;">
14
</td>
<td style="text-align:left;">
12 (86)
</td>
<td style="text-align:left;">
2 (14)
</td>
</tr>
<tr grouplength="3">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>Num gears</strong>
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
3
</td>
<td style="text-align:left;">
15
</td>
<td style="text-align:left;">
15 (100)
</td>
<td style="text-align:left;">
0 (0)
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
4
</td>
<td style="text-align:left;">
12
</td>
<td style="text-align:left;">
4 (33)
</td>
<td style="text-align:left;">
8 (67)
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
5
</td>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
0 (0)
</td>
<td style="text-align:left;">
5 (100)
</td>
</tr>
<tr>
<td style="text-align:left;">
Mean MPG
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
17.15
</td>
<td style="text-align:left;">
24.39
</td>
</tr>
<tr>
<td style="text-align:left;">
Mean horsepower
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
160.26
</td>
<td style="text-align:left;">
126.85
</td>
</tr>
</tbody>
</table>
<em>Row-wise</em> functions are the opposite, and act on each covariate level
independently of the outcomes. This is useful for displaying measures
such as regression coefficients. The example below shows the odds ratios
of a car having a manual transmission for each number of cylinders and
engine shape, with a car being less likely to have manual transmission
the greater the number of cylinders. This is calculated with the
<code>epitab::odds_ratio</code> function, which obtains the odds ratios for each
covariate level from a logistic regression on a specified outcome.
<code>epitab</code> also provides functionality for displaying hazard ratios for
time-to-event outcomes. Note that in the example below the odds ratios
are obtained from univariate models of each covariate in turn, although
functionality is provided for adjusting for other factors. See the help
page for <code>odds_ratio</code> for further details.</p>

<pre><code>contingency_table(independents=list(&quot;Cylinders&quot;=&quot;cyl&quot;, &quot;Engine shape&quot;=&quot;vs&quot;),
                  outcomes=list(&quot;Manual transmission&quot;=&quot;am&quot;),
                  data=mtcars,
                  crosstab_funcs = list(freq()),
                  col_funcs=list(&quot;Mean MPG&quot;=summary_mean(&quot;mpg&quot;),
                                 &quot;Mean horsepower&quot;=summary_mean(&quot;hp&quot;)),
                  row_funcs=list(&quot;OR&quot;=odds_ratio(&quot;am&quot;))) %&gt;%
    neat_table() %&gt;%
    kableExtra::kable_styling(bootstrap_options = c('striped', 'hover'),
                              full_width=FALSE)
</code></pre>

<p><table class="table table table-striped table-hover" style="margin-left: auto; margin-right: auto; width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="border-bottom:hidden" colspan="1">
</th>
<th style="border-bottom:hidden" colspan="1">
</th>
<th style="text-align:center; border-bottom:hidden; padding-bottom:0; padding-left:3px;padding-right:3px;" colspan="2">
Manual transmission</p>

<p></th>
<th style="border-bottom:hidden" colspan="1">
</th>
</tr>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
All
</th>
<th style="text-align:left;">
0
</th>
<th style="text-align:left;">
1
</th>
<th style="text-align:left;">
OR
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Total
</td>
<td style="text-align:left;">
32
</td>
<td style="text-align:left;">
19 (59)
</td>
<td style="text-align:left;">
13 (41)
</td>
<td style="text-align:left;">
</td>
</tr>
<tr grouplength="3">
<td colspan="5" style="border-bottom: 1px solid;">
<strong>Cylinders</strong>
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
4
</td>
<td style="text-align:left;">
11
</td>
<td style="text-align:left;">
3 (27)
</td>
<td style="text-align:left;">
8 (73)
</td>
<td style="text-align:left;">
1
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
6
</td>
<td style="text-align:left;">
7
</td>
<td style="text-align:left;">
4 (57)
</td>
<td style="text-align:left;">
3 (43)
</td>
<td style="text-align:left;">
0.28 (0.03 - 1.99)
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
8
</td>
<td style="text-align:left;">
14
</td>
<td style="text-align:left;">
12 (86)
</td>
<td style="text-align:left;">
2 (14)
</td>
<td style="text-align:left;">
0.06 (0.01 - 0.39)
</td>
</tr>
<tr grouplength="2">
<td colspan="5" style="border-bottom: 1px solid;">
<strong>Engine shape</strong>
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
0
</td>
<td style="text-align:left;">
18
</td>
<td style="text-align:left;">
12 (67)
</td>
<td style="text-align:left;">
6 (33)
</td>
<td style="text-align:left;">
1
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
1
</td>
<td style="text-align:left;">
14
</td>
<td style="text-align:left;">
7 (50)
</td>
<td style="text-align:left;">
7 (50)
</td>
<td style="text-align:left;">
2.00 (0.48 - 8.76)
</td>
</tr>
<tr>
<td style="text-align:left;">
Mean MPG
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
17.15
</td>
<td style="text-align:left;">
24.39
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Mean horsepower
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
160.26
</td>
<td style="text-align:left;">
126.85
</td>
<td style="text-align:left;">
</td>
</tr>
</tbody>
</table></p>

<h2 id="custom-functions">Custom functions</h2>

<p>This brief introduction has shown the use of inbuilt functions for
displaying the three types of summary statistics, such as <code>freq</code>,
<code>odds_ratio</code>, and <code>summary_mean</code>. However, the main strength of the
package as I see it is that any user-defined function can be used in
each of these three roles, provided they meet the required
parameterisations. Please see the
<a href="https://cran.r-project.org/web/packages/epitab/vignettes/user_guide.html" target="_blank">vignette</a>
for details.</p>

<h2 id="further-work">Further work</h2>

<p>It&rsquo;s a rather simple package but one that I&rsquo;ve already incorporated
quite frequently into my exploratory analysis workflow. I&rsquo;m always keen
to improve it and would appreciate any comments and feedback (<a href="http://stuartlacy.co.uk/#contact" target="_blank">contact
me here</a>). Particular features I&rsquo;d
like to add in future releases include the ability to calculate
statistics related to each covariate and outcome but not necessarily
calculated for each level, such as displaying the output of a chi-square
test between the covariate and outcome. I&rsquo;d also welcome feedback on
different options for formatting the table; the layout that is currently
used is one that makes sense to me but others may have different
preferences.</p>

      </div>

      


<div class="article-tags">
  
  <a class="btn btn-primary btn-outline" href="/tags/r">R</a>
  
  <a class="btn btn-primary btn-outline" href="/tags/epitab">epitab</a>
  
  <a class="btn btn-primary btn-outline" href="/tags/software-development">software development</a>
  
  <a class="btn btn-primary btn-outline" href="/tags/epidemiology">epidemiology</a>
  
</div>



    </div>
  </div>

</article>



<div class="article-container article-widget">
  <div class="hr-light"></div>
  <h3>Related</h3>
  <ul>
    
    <li><a href="/2017/04/07/an-interactive-multi-state-modelling-shiny-web-app/">An interactive Multi-State Modelling Shiny web app</a></li>
    
    <li><a href="/2016/09/27/guide-to-publishing-r-packages-on-cran/">Guide to publishing R packages on CRAN</a></li>
    
    <li><a href="/2016/06/08/an-r-package-for-estimating-disease-prevalence-by-simulation-rprev/">An R package for estimating disease prevalence by simulation: rprev</a></li>
    
    <li><a href="/project/msmshiny/">A Multi-State Modelling Shiny app</a></li>
    
    <li><a href="/project/rprev/">rprev</a></li>
    
  </ul>
</div>




<div class="article-container">
  
<section id="comments">
  <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "stulacy" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>


</div>

<footer class="site-footer">
  <div class="container">
    <p class="powered-by">

      &copy; 2017 Stuart Lacy &middot; 

      Powered by the
      <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
      <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

      <span class="pull-right" aria-hidden="true">
        <a href="#" id="back_to_top">
          <span class="button_icon">
            <i class="fa fa-chevron-up fa-2x"></i>
          </span>
        </a>
      </span>

    </p>
  </div>
</footer>


<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close btn-large" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Cite</h4>
      </div>
      <div>
        <pre><code class="modal-body tex"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-primary btn-outline js-copy-cite" href="#" target="_blank">
          <i class="fa fa-copy"></i> Copy
        </a>
        <a class="btn btn-primary btn-outline js-download-cite" href="#" target="_blank">
          <i class="fa fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

    

    
    
    <script id="dsq-count-scr" src="//stulacy.disqus.com/count.js" async></script>
    

    

    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" integrity="sha512-3P8rXCuGJdNZOnUx/03c1jOTnMn3rP63nBip5gOP2qmUh5YAdVAvFZ1E+QLZZbC1rtMrQb+mah3AfYW11RUrWA==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.3/imagesloaded.pkgd.min.js" integrity="sha512-umsR78NN0D23AzgoZ11K7raBD+R6hqKojyBZs1w8WvYlsI+QuKRGBx3LFCwhatzBunCjDuJpDHwxD13sLMbpRA==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha512-iztkobsvnjKfAtTNdHkGVjAYTrrtlC7mGp/54c40wowO7LhURYl3gVzzcEqGl/qKXQltJ2HwMrdLcNUdo+N/RQ==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.4/isotope.pkgd.min.js" integrity="sha512-VDBOIlDbuC4VWxGJNmuFRQ0Li0SKkDpmGyuhAG5LTDLd/dJ/S0WMVxriR2Y+CyPL5gzjpN4f/6iqWVBJlht0tQ==" crossorigin="anonymous"></script>
    
    
    <script src="/js/hugo-academic.js"></script>
    

    
    
      
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>
      

      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/python.min.js"></script>
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/r.min.js"></script>
      

      

      <script>hljs.initHighlightingOnLoad();</script>
    

    
    
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });
    </script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS_CHTML" integrity="sha512-tOav5w1OjvsSJzePRtt2uQPFwBoHt1VZcUq8l8nm5284LEKE9FSJBQryzMBzHxY5P0zRdNqEcpLIRVYFNgu1jw==" crossorigin="anonymous"></script>
    
    

  </body>
</html>

